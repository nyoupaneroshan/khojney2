(()=>{var e={};e.id=410,e.ids=[410],e.modules={1241:()=>{},2984:(e,t,r)=>{"use strict";var s=r(860);r.o(s,"usePathname")&&r.d(t,{usePathname:function(){return s.usePathname}}),r.o(s,"useRouter")&&r.d(t,{useRouter:function(){return s.useRouter}}),r.o(s,"useSearchParams")&&r.d(t,{useSearchParams:function(){return s.useSearchParams}})},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},9309:(e,t,r)=>{"use strict";r.d(t,{default:()=>x});var s=r(13486),a=r(2984),n=r(49989),o=r.n(n),i=r(47985),l=r(68689);let d=(0,r(84667).A)("medal",[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]]);var c=r(92816),u=r(57956),p=r(54528);let h={hidden:{opacity:0,y:30},visible:{opacity:1,y:0,transition:{duration:.6,ease:"easeOut"}}},m={hidden:{opacity:0,x:-20},visible:{opacity:1,x:0}};function x({leaderboardUsers:e,categories:t,currentPeriod:r,currentCategory:n,userRank:x}){let b=(0,a.useRouter)(),y=(0,a.usePathname)(),f=(e,t)=>{let r=new URLSearchParams;r.set("period",e),t&&r.set("category",t),b.push(`${y}?${r.toString()}`)},v=(e,t)=>{let r=e||(t?t.replace(/\s/g,""):"unknown-user");return`https://api.dicebear.com/7.x/adventurer/svg?seed=${encodeURIComponent(r)}&radius=50&backgroundColor=b6e3f4,c0aede,d1d4f9,ffeedd,ffdfbf&backgroundType=solid,gradientLinear`};return(0,s.jsxs)("div",{className:"min-h-screen relative overflow-hidden bg-slate-900 text-white font-sans flex flex-col items-center py-8 px-4 sm:px-6 md:px-8",children:[(0,s.jsx)("div",{className:"absolute top-0 left-0 w-96 h-96 bg-cyan-500/10 rounded-full blur-3xl opacity-40 animate-blob-slow -translate-x-1/2"}),(0,s.jsx)("div",{className:"absolute bottom-0 right-0 w-96 h-96 bg-purple-500/10 rounded-full blur-3xl opacity-40 animate-blob-slow animation-delay-2000 translate-x-1/2"}),(0,s.jsxs)("div",{className:"w-full max-w-4xl mx-auto z-10",children:[(0,s.jsxs)(p.P.div,{variants:h,initial:"hidden",animate:"visible",className:"text-center mb-12",children:[(0,s.jsx)(p.P.div,{initial:{scale:.5,opacity:0},animate:{scale:1,opacity:1},transition:{type:"spring",stiffness:200,damping:12,delay:.1},className:"inline-block p-4 bg-yellow-400/10 rounded-full mb-4",children:(0,s.jsx)(i.A,{className:"w-16 h-16 text-yellow-400"})}),(0,s.jsx)("h1",{className:"text-4xl sm:text-5xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-cyan-300 to-purple-400",children:"Leaderboard"}),(0,s.jsx)("p",{className:"text-lg text-slate-400 mt-3 max-w-2xl mx-auto",children:"See how you stack up against the top performers."})]}),(0,s.jsxs)(p.P.div,{variants:h,initial:"hidden",animate:"visible",transition:{delay:.2},className:"my-8 p-4 bg-slate-800/70 border border-slate-700/70 rounded-xl shadow-lg flex flex-col md:flex-row gap-4 items-center justify-between backdrop-blur-sm",children:[(0,s.jsx)("div",{className:"flex w-full md:w-auto items-center gap-2 bg-slate-900/50 p-1 rounded-full border border-slate-700",children:["all_time","monthly","weekly"].map(e=>(0,s.jsx)("button",{onClick:()=>f(e,n),className:`w-full md:w-auto px-4 py-2 text-sm font-semibold rounded-full transition-colors ${r===e?"bg-cyan-600 text-white":"text-slate-300 hover:bg-slate-700/50"}`,children:e.charAt(0).toUpperCase()+e.slice(1).replace("_"," ")},e))}),(0,s.jsxs)("div",{className:"relative w-full md:w-64",children:[(0,s.jsxs)("select",{onChange:e=>f(r,e.target.value||null),value:n||"",className:"appearance-none w-full px-4 py-2.5 text-slate-100 bg-slate-800 border border-slate-600 rounded-md pr-10 focus:outline-none focus:ring-2 focus:ring-cyan-500 transition-colors cursor-pointer",children:[(0,s.jsx)("option",{value:"",children:"All Categories"}),t.map(e=>(0,s.jsx)("option",{value:e.id,children:e.name_en},e.id))]}),(0,s.jsx)("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-3 text-slate-400",children:(0,s.jsx)(l.A,{size:20})})]})]}),(0,s.jsx)(p.P.div,{initial:"hidden",animate:"visible",variants:{visible:{transition:{staggerChildren:.07}}},className:"space-y-3",children:e.length>0?e.map((e,t)=>(0,s.jsxs)(p.P.div,{variants:m,className:`flex items-center p-4 rounded-lg border transition-all duration-300
                    ${1===e.rank?"bg-yellow-400/10 border-yellow-400/30":2===e.rank?"bg-slate-400/10 border-slate-400/30":3===e.rank?"bg-amber-500/10 border-amber-500/30":"bg-slate-800/50 border-slate-700/60"}`,children:[(0,s.jsxs)("div",{className:"flex items-center gap-4 flex-grow min-w-0",children:[(0,s.jsx)("span",{className:"text-lg font-bold w-8 text-center flex-shrink-0 text-slate-400",children:e.rank}),(0,s.jsx)("img",{src:v(e.user_id,e.full_name),alt:e.full_name||"User Avatar",className:"w-12 h-12 rounded-full flex-shrink-0 border-2 border-slate-600"}),(0,s.jsx)(o(),{href:`/profile/${e.user_id}`,className:"text-lg font-semibold text-white hover:text-cyan-300 transition-colors truncate",children:e.full_name||"Anonymous User"}),e.rank<=3&&(0,s.jsx)(d,{size:20,className:1===e.rank?"text-yellow-400":2===e.rank?"text-slate-400":"text-amber-500"})]}),(0,s.jsxs)("p",{className:"text-xl font-bold text-green-400 flex-shrink-0 ml-4",children:[e.total_score," pts"]})]},e.user_id)):(0,s.jsxs)(p.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center py-16 px-4 bg-slate-800/40 rounded-xl border border-slate-700/50 mt-8",children:[(0,s.jsx)(c.A,{className:"mx-auto h-16 w-16 text-slate-600 mb-4"}),(0,s.jsx)("p",{className:"text-xl font-semibold text-slate-300",children:"No scores found"}),(0,s.jsx)("p",{className:"text-slate-400 mt-1",children:"Be the first to set a record for this filter!"})]})})]}),x&&(0,s.jsx)(p.P.div,{initial:{y:"100%"},animate:{y:0},transition:{type:"spring",stiffness:150,damping:20,delay:.5},className:"fixed bottom-4 left-4 right-4 sm:left-auto sm:right-8 bg-slate-900/80 backdrop-blur-lg p-4 border border-cyan-500/40 shadow-2xl z-50 rounded-xl",children:(0,s.jsxs)("div",{className:"flex justify-between items-center text-white",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(u.A,{className:"h-6 w-6 text-cyan-400"}),(0,s.jsx)("p",{className:"font-semibold text-slate-200",children:"Your Rank"})]}),(0,s.jsxs)("p",{className:"text-2xl font-extrabold text-green-400",children:["#",x.rank,(0,s.jsxs)("span",{className:"text-base font-medium text-slate-400 ml-2",children:["(",x.total_score," pts)"]})]})]})})]})}},9699:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});var s=r(41253);let a=async e=>[{type:"image/x-icon",sizes:"16x16",url:(0,s.fillMetadataSegment)(".",await e.params,"favicon.ico")+""}]},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},11997:e=>{"use strict";e.exports=require("punycode")},13197:(e,t,r)=>{Promise.resolve().then(r.bind(r,9309))},14276:()=>{},15405:(e,t,r)=>{Promise.resolve().then(r.bind(r,40799))},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},20685:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>l,metadata:()=>i});var s=r(38828),a=r(22282),n=r.n(a);r(14276);var o=r(59229);let i={title:"Khojney App",description:"Your awesome quiz application"};function l({children:e}){return(0,s.jsx)("html",{lang:"en",className:"dark",children:(0,s.jsx)("body",{className:n().className,children:(0,s.jsx)(o.AuthProvider,{children:e})})})}},21503:(e,t,r)=>{"use strict";r.d(t,{A:()=>d,AuthProvider:()=>c});var s=r(13486),a=r(60159),n=r(98510),o=r(60532);let i="user_role",l=(0,a.createContext)(void 0),d=()=>{let e=(0,a.useContext)(l);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e},c=({children:e})=>{let[t,r]=(0,a.useState)(null),[d,c]=(0,a.useState)(null),[u,p]=(0,a.useState)(!0);return(0,a.useEffect)(()=>{let e=async e=>{if(r(e),e?.user){let{data:t,error:r}=await n.N.from("profiles").select("role").eq("id",e.user.id).single();if(r)console.error("Error fetching user role:",r.message),c(null),o.A.remove(i);else if(t){c(t.role);let r=e.expires_in,s=r?new Date(Date.now()+1e3*r):void 0;o.A.set(i,t.role,{expires:s})}else console.warn("User profile not found for ID:",e.user.id),c(null),o.A.remove(i)}else c(null),o.A.remove(i);p(!1)};n.N.auth.getSession().then(({data:{session:t}})=>{e(t)});let{data:{subscription:t}}=n.N.auth.onAuthStateChange((t,r)=>{e(r)});return()=>t.unsubscribe()},[]),(0,s.jsx)(l.Provider,{value:{session:t,loadingAuth:u,userRole:d},children:e})}},27910:e=>{"use strict";e.exports=require("stream")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},34631:e=>{"use strict";e.exports=require("tls")},40799:(e,t,r)=>{"use strict";r.d(t,{default:()=>s});let s=(0,r(33952).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/nyoupane/Documents/11TechMedia/QuizApp/khojney/khojney_main/khojney-app/new_khojney/khojney-main/src/app/leaderboard/LeaderboardClient.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/nyoupane/Documents/11TechMedia/QuizApp/khojney/khojney_main/khojney-app/new_khojney/khojney-main/src/app/leaderboard/LeaderboardClient.tsx","default")},47985:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(84667).A)("trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]])},54871:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,69355,23)),Promise.resolve().then(r.t.bind(r,54439,23)),Promise.resolve().then(r.t.bind(r,67851,23)),Promise.resolve().then(r.t.bind(r,94730,23)),Promise.resolve().then(r.t.bind(r,19774,23)),Promise.resolve().then(r.t.bind(r,53170,23)),Promise.resolve().then(r.t.bind(r,20968,23)),Promise.resolve().then(r.t.bind(r,78298,23))},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},57510:(e,t,r)=>{Promise.resolve().then(r.bind(r,21503))},57956:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(84667).A)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},59229:(e,t,r)=>{"use strict";r.d(t,{AuthProvider:()=>a});var s=r(33952);(0,s.registerClientReference)(function(){throw Error("Attempted to call useAuth() from the server but useAuth is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/nyoupane/Documents/11TechMedia/QuizApp/khojney/khojney_main/khojney-app/new_khojney/khojney-main/src/components/AuthContext.tsx","useAuth");let a=(0,s.registerClientReference)(function(){throw Error("Attempted to call AuthProvider() from the server but AuthProvider is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/nyoupane/Documents/11TechMedia/QuizApp/khojney/khojney_main/khojney-app/new_khojney/khojney-main/src/components/AuthContext.tsx","AuthProvider")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},66543:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,30385,23)),Promise.resolve().then(r.t.bind(r,33737,23)),Promise.resolve().then(r.t.bind(r,86081,23)),Promise.resolve().then(r.t.bind(r,1904,23)),Promise.resolve().then(r.t.bind(r,35856,23)),Promise.resolve().then(r.t.bind(r,55492,23)),Promise.resolve().then(r.t.bind(r,89082,23)),Promise.resolve().then(r.t.bind(r,45812,23))},68689:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(84667).A)("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]])},72088:()=>{},74075:e=>{"use strict";e.exports=require("zlib")},76029:e=>{function t(e){var t=Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id=76029,e.exports=t},78914:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i});var s=r(38828),a=r(85296),n=r(65208),o=r(40799);async function i({searchParams:e}){let t=(0,n.UL)(),r=(0,a.createServerClient)("https://uxpdqthqyttujyvqwaeh.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InV4cGRxdGhxeXR0dWp5dnF3YWVoIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDg5NzE3MzgsImV4cCI6MjA2NDU0NzczOH0.clopYxo2qaXYmw4poLnEoJOe6hXXotZwR3GYZL_GdMQ",{cookies:{get:e=>t.get(e)?.value}}),i=e.period||"all_time",l=e.category||null,{data:d}=await r.from("categories").select("id, name_en"),c=r.from("leaderboards").select("rank, user_id, total_score, full_name").eq("period",i);c=l?c.eq("category_id",l):c.is("category_id",null);let{data:u,error:p}=await c.order("rank",{ascending:!0}).limit(100),{data:{session:h}}=await r.auth.getSession(),m=null;if(h?.user){let{data:e}=await r.rpc("get_user_rank",{p_user_id:h.user.id,p_period:i,p_category_id:l});e&&e.length>0&&(m=e[0])}return p&&console.error("Error fetching leaderboard data:",p),(0,s.jsx)(o.default,{leaderboardUsers:u||[],categories:d||[],currentPeriod:i,currentCategory:l,userRank:m})}},79428:e=>{"use strict";e.exports=require("buffer")},79551:e=>{"use strict";e.exports=require("url")},80765:e=>{function t(e){var t=Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id=80765,e.exports=t},81630:e=>{"use strict";e.exports=require("http")},89054:(e,t,r)=>{Promise.resolve().then(r.bind(r,59229))},91030:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>o.a,__next_app__:()=>u,pages:()=>c,routeModule:()=>p,tree:()=>d});var s=r(24332),a=r(48819),n=r(67851),o=r.n(n),i=r(97540),l={};for(let e in i)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>i[e]);r.d(t,l);let d={children:["",{children:["leaderboard",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,78914)),"/Users/nyoupane/Documents/11TechMedia/QuizApp/khojney/khojney_main/khojney-app/new_khojney/khojney-main/src/app/leaderboard/page.tsx"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,9699))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,20685)),"/Users/nyoupane/Documents/11TechMedia/QuizApp/khojney/khojney_main/khojney-app/new_khojney/khojney-main/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,19033,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,39956,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,92341,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,9699))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,c=["/Users/nyoupane/Documents/11TechMedia/QuizApp/khojney/khojney_main/khojney-app/new_khojney/khojney-main/src/app/leaderboard/page.tsx"],u={require:r,loadChunk:()=>Promise.resolve()},p=new s.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/leaderboard/page",pathname:"/leaderboard",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},91645:e=>{"use strict";e.exports=require("net")},92816:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(84667).A)("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},94735:e=>{"use strict";e.exports=require("events")},98510:(e,t,r)=>{"use strict";r.d(t,{N:()=>s});let s=(0,r(95681).createBrowserClient)("https://uxpdqthqyttujyvqwaeh.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InV4cGRxdGhxeXR0dWp5dnF3YWVoIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDg5NzE3MzgsImV4cCI6MjA2NDU0NzczOH0.clopYxo2qaXYmw4poLnEoJOe6hXXotZwR3GYZL_GdMQ")}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[50,199,253,154,989,296,208],()=>r(91030));module.exports=s})();