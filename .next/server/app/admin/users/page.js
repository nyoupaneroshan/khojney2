(()=>{var e={};e.id=733,e.ids=[733],e.modules={1039:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(84667).A)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},1241:()=>{},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},4653:(e,t,s)=>{"use strict";s.d(t,{N:()=>g});var r=s(13486),n=s(60159),i=s(59734),a=s(11650),o=s(46257),l=s(95834),d=s(80880),c=s(267);class u extends n.Component{getSnapshotBeforeUpdate(e){let t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){let e=t.offsetParent,s=(0,d.s)(e)&&e.offsetWidth||0,r=this.props.sizeRef.current;r.height=t.offsetHeight||0,r.width=t.offsetWidth||0,r.top=t.offsetTop,r.left=t.offsetLeft,r.right=s-r.width-r.left}return null}componentDidUpdate(){}render(){return this.props.children}}function h({children:e,isPresent:t,anchorX:s}){let i=(0,n.useId)(),a=(0,n.useRef)(null),o=(0,n.useRef)({width:0,height:0,top:0,left:0,right:0}),{nonce:l}=(0,n.useContext)(c.Q);return(0,n.useInsertionEffect)(()=>{let{width:e,height:r,top:n,left:d,right:c}=o.current;if(t||!a.current||!e||!r)return;let u="left"===s?`left: ${d}`:`right: ${c}`;a.current.dataset.motionPopId=i;let h=document.createElement("style");return l&&(h.nonce=l),document.head.appendChild(h),h.sheet&&h.sheet.insertRule(`
          [data-motion-pop-id="${i}"] {
            position: absolute !important;
            width: ${e}px !important;
            height: ${r}px !important;
            ${u}px !important;
            top: ${n}px !important;
          }
        `),()=>{document.head.contains(h)&&document.head.removeChild(h)}},[t]),(0,r.jsx)(u,{isPresent:t,childRef:a,sizeRef:o,children:n.cloneElement(e,{ref:a})})}let m=({children:e,initial:t,isPresent:s,onExitComplete:i,custom:o,presenceAffectsLayout:d,mode:c,anchorX:u})=>{let m=(0,a.M)(p),x=(0,n.useId)(),y=!0,f=(0,n.useMemo)(()=>(y=!1,{id:x,initial:t,isPresent:s,custom:o,onExitComplete:e=>{for(let t of(m.set(e,!0),m.values()))if(!t)return;i&&i()},register:e=>(m.set(e,!1),()=>m.delete(e))}),[s,m,i]);return d&&y&&(f={...f}),(0,n.useMemo)(()=>{m.forEach((e,t)=>m.set(t,!1))},[s]),n.useEffect(()=>{s||m.size||!i||i()},[s]),"popLayout"===c&&(e=(0,r.jsx)(h,{isPresent:s,anchorX:u,children:e})),(0,r.jsx)(l.t.Provider,{value:f,children:e})};function p(){return new Map}var x=s(50945);let y=e=>e.key||"";function f(e){let t=[];return n.Children.forEach(e,e=>{(0,n.isValidElement)(e)&&t.push(e)}),t}let g=({children:e,custom:t,initial:s=!0,onExitComplete:l,presenceAffectsLayout:d=!0,mode:c="sync",propagate:u=!1,anchorX:h="left"})=>{let[p,g]=(0,x.xQ)(u),j=(0,n.useMemo)(()=>f(e),[e]),b=u&&!p?[]:j.map(y),v=(0,n.useRef)(!0),k=(0,n.useRef)(j),w=(0,a.M)(()=>new Map),[N,A]=(0,n.useState)(j),[P,_]=(0,n.useState)(j);(0,o.E)(()=>{v.current=!1,k.current=j;for(let e=0;e<P.length;e++){let t=y(P[e]);b.includes(t)?w.delete(t):!0!==w.get(t)&&w.set(t,!1)}},[P,b.length,b.join("-")]);let C=[];if(j!==N){let e=[...j];for(let t=0;t<P.length;t++){let s=P[t],r=y(s);b.includes(r)||(e.splice(t,0,s),C.push(s))}return"wait"===c&&C.length&&(e=C),_(f(e)),A(j),null}let{forceRender:z}=(0,n.useContext)(i.L);return(0,r.jsx)(r.Fragment,{children:P.map(e=>{let n=y(e),i=(!u||!!p)&&(j===P||b.includes(n));return(0,r.jsx)(m,{isPresent:i,initial:(!v.current||!!s)&&void 0,custom:t,presenceAffectsLayout:d,mode:c,onExitComplete:i?void 0:()=>{if(!w.has(n))return;w.set(n,!0);let e=!0;w.forEach(t=>{t||(e=!1)}),e&&(z?.(),_(k.current),u&&g?.(),l&&l())},anchorX:h,children:e},n)})})}},9431:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(84667).A)("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]])},9699:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n});var r=s(41253);let n=async e=>[{type:"image/x-icon",sizes:"16x16",url:(0,r.fillMetadataSegment)(".",await e.params,"favicon.ico")+""}]},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},11309:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});let r=(0,s(33952).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/nyoupane/Documents/11TechMedia/QuizApp/khojney/khojney_main/khojney-app/new_khojney/khojney-main/src/app/admin/users/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/nyoupane/Documents/11TechMedia/QuizApp/khojney/khojney_main/khojney-app/new_khojney/khojney-main/src/app/admin/users/page.tsx","default")},11997:e=>{"use strict";e.exports=require("punycode")},14276:()=>{},15998:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(84667).A)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},19e3:(e,t,s)=>{Promise.resolve().then(s.bind(s,11309))},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},20685:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>l,metadata:()=>o});var r=s(38828),n=s(22282),i=s.n(n);s(14276);var a=s(59229);let o={title:"Khojney App",description:"Your awesome quiz application"};function l({children:e}){return(0,r.jsx)("html",{lang:"en",className:"dark",children:(0,r.jsx)("body",{className:i().className,children:(0,r.jsx)(a.AuthProvider,{children:e})})})}},21503:(e,t,s)=>{"use strict";s.d(t,{A:()=>d,AuthProvider:()=>c});var r=s(13486),n=s(60159),i=s(98510),a=s(60532);let o="user_role",l=(0,n.createContext)(void 0),d=()=>{let e=(0,n.useContext)(l);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e},c=({children:e})=>{let[t,s]=(0,n.useState)(null),[d,c]=(0,n.useState)(null),[u,h]=(0,n.useState)(!0);return(0,n.useEffect)(()=>{let e=async e=>{if(s(e),e?.user){let{data:t,error:s}=await i.N.from("profiles").select("role").eq("id",e.user.id).single();if(s)console.error("Error fetching user role:",s.message),c(null),a.A.remove(o);else if(t){c(t.role);let s=e.expires_in,r=s?new Date(Date.now()+1e3*s):void 0;a.A.set(o,t.role,{expires:r})}else console.warn("User profile not found for ID:",e.user.id),c(null),a.A.remove(o)}else c(null),a.A.remove(o);h(!1)};i.N.auth.getSession().then(({data:{session:t}})=>{e(t)});let{data:{subscription:t}}=i.N.auth.onAuthStateChange((t,s)=>{e(s)});return()=>t.unsubscribe()},[]),(0,r.jsx)(l.Provider,{value:{session:t,loadingAuth:u,userRole:d},children:e})}},27910:e=>{"use strict";e.exports=require("stream")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},34631:e=>{"use strict";e.exports=require("tls")},35795:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(84667).A)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]])},37558:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(84667).A)("trash-2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},49230:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>a.a,__next_app__:()=>u,pages:()=>c,routeModule:()=>h,tree:()=>d});var r=s(24332),n=s(48819),i=s(67851),a=s.n(i),o=s(97540),l={};for(let e in o)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);s.d(t,l);let d={children:["",{children:["admin",{children:["users",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,11309)),"/Users/nyoupane/Documents/11TechMedia/QuizApp/khojney/khojney_main/khojney-app/new_khojney/khojney-main/src/app/admin/users/page.tsx"]}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,9699))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(s.bind(s,20685)),"/Users/nyoupane/Documents/11TechMedia/QuizApp/khojney/khojney_main/khojney-app/new_khojney/khojney-main/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,19033,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(s.t.bind(s,39956,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(s.t.bind(s,92341,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,9699))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,c=["/Users/nyoupane/Documents/11TechMedia/QuizApp/khojney/khojney_main/khojney-app/new_khojney/khojney-main/src/app/admin/users/page.tsx"],u={require:s,loadChunk:()=>Promise.resolve()},h=new r.AppPageRouteModule({definition:{kind:n.RouteKind.APP_PAGE,page:"/admin/users/page",pathname:"/admin/users",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},53848:(e,t,s)=>{Promise.resolve().then(s.bind(s,58677))},54871:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,69355,23)),Promise.resolve().then(s.t.bind(s,54439,23)),Promise.resolve().then(s.t.bind(s,67851,23)),Promise.resolve().then(s.t.bind(s,94730,23)),Promise.resolve().then(s.t.bind(s,19774,23)),Promise.resolve().then(s.t.bind(s,53170,23)),Promise.resolve().then(s.t.bind(s,20968,23)),Promise.resolve().then(s.t.bind(s,78298,23))},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},57510:(e,t,s)=>{Promise.resolve().then(s.bind(s,21503))},57956:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(84667).A)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},58677:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>w});var r=s(13486),n=s(60159),i=s(49989),a=s.n(i),o=s(98510),l=s(54528),d=s(4653),c=s(15998),u=s(9431),h=s(84667);let m=(0,h.A)("shield-check",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);var p=s(57956),x=s(35795);let y=(0,h.A)("pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]),f=(0,h.A)("key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]);var g=s(37558),j=s(97334),b=s(1039);function v({user:e,onSave:t,onCancel:s}){let[i,a]=(0,n.useState)(e.full_name||""),[l,d]=(0,n.useState)(e.role),[c,u]=(0,n.useState)(!1),[h,m]=(0,n.useState)(null),p=async s=>{s.preventDefault(),u(!0),m(null);let r={full_name:i,role:l};try{let{error:s}=await o.N.from("profiles").update(r).eq("id",e.id);s?m(s.message):t(e.id,r)}catch(e){console.error("Error updating user:",e),m(e.message||"An unexpected error occurred.")}finally{u(!1)}};return(0,r.jsxs)("div",{className:"p-8",children:[" ",(0,r.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,r.jsxs)("h2",{className:"text-2xl font-bold text-white",children:["Edit User: ",e.full_name||e.id]}),(0,r.jsx)("button",{onClick:s,className:"text-gray-400 hover:text-white transition-colors p-1 rounded-full hover:bg-gray-700","aria-label":"Close",children:(0,r.jsx)(b.A,{size:24})})]}),(0,r.jsxs)("form",{onSubmit:p,className:"space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"fullName",className:"block text-sm font-medium text-gray-300 mb-1",children:"Full Name"}),(0,r.jsx)("input",{id:"fullName",type:"text",value:i,onChange:e=>a(e.target.value),className:"w-full px-4 py-2 mt-1 text-white bg-gray-700 border border-gray-600 rounded-md placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-cyan-500 focus:ring-offset-2 focus:ring-offset-gray-900",disabled:c})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"role",className:"block text-sm font-medium text-gray-300 mb-1",children:"User Role"}),(0,r.jsxs)("select",{id:"role",value:l,onChange:e=>d(e.target.value),className:"w-full px-4 py-2 mt-1 text-white bg-gray-700 border border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-cyan-500 focus:ring-offset-2 focus:ring-offset-gray-900",disabled:c,children:[(0,r.jsx)("option",{value:"user",children:"User"}),(0,r.jsx)("option",{value:"premium_user",children:"Premium User"}),(0,r.jsx)("option",{value:"admin",children:"Admin"})]})]}),h&&(0,r.jsx)("p",{className:"text-red-400 text-sm mt-4 text-center",children:h}),(0,r.jsxs)("div",{className:"flex justify-end gap-4 pt-4",children:[(0,r.jsx)("button",{type:"button",onClick:s,className:"px-6 py-2 font-bold text-gray-300 bg-gray-700 rounded-md hover:bg-gray-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",disabled:c,children:"Cancel"}),(0,r.jsx)("button",{type:"submit",className:"px-6 py-2 font-bold text-white bg-cyan-600 rounded-md hover:bg-cyan-500 transition-colors focus:outline-none focus:ring-2 focus:ring-cyan-500 focus:ring-offset-2 focus:ring-offset-gray-900 disabled:opacity-50 disabled:cursor-not-allowed",disabled:c,children:c?"Saving...":"Save Changes"})]})]})]})}let k=({icon:e,title:t,value:s,colorClass:n})=>(0,r.jsx)("div",{className:"bg-gray-800/50 border border-gray-700/80 rounded-xl p-5",children:(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsx)("div",{className:`flex-shrink-0 w-10 h-10 rounded-lg flex items-center justify-center ${n}`,children:e}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-400",children:t}),(0,r.jsx)("p",{className:"text-2xl font-bold text-white",children:s})]})]})});function w(){let[e,t]=(0,n.useState)(!0),[s,i]=(0,n.useState)(!1),[h,b]=(0,n.useState)([]),[w,N]=(0,n.useState)(""),[A,P]=(0,n.useState)(null),[_,C]=(0,n.useState)(null),z=async e=>{if(!confirm("Are you sure you want to send a password reset link to this user?"))return;t(!0);let{data:s,error:r}=await o.N.functions.invoke("admin-reset-password",{body:{userId:e}});r?C({message:`Failed to send password reset: ${r.message}`,type:"error"}):C({message:"Password reset link sent successfully!",type:"success"}),t(!1)},M=async e=>{if(!confirm("DANGER: Are you sure you want to permanently delete this user? This cannot be undone."))return;t(!0);let{data:s,error:r}=await o.N.functions.invoke("admin-delete-user",{body:{userId:e}});r?C({message:`Failed to delete user: ${r.message}`,type:"error"}):(C({message:"User deleted successfully.",type:"success"}),b(t=>t.filter(t=>t.id!==e))),t(!1)};(0,n.useCallback)(async()=>{let{data:e,error:t}=await o.N.rpc("get_all_users_with_email",{search_term:w}).order("created_at",{ascending:!1});t?(console.error("Error fetching users:",t),b([]),C({message:`Error fetching users: ${t.message}`,type:"error"})):b(e||[])},[w]);let E=(0,n.useMemo)(()=>{let e=h.length,t=h.filter(e=>"admin"===e.role).length;return{total:e,admins:t,regularUsers:h.filter(e=>"user"===e.role).length,premiumUsers:h.filter(e=>"premium_user"===e.role).length}},[h]);return e&&0===h.length?(0,r.jsx)(j.e,{}):s?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("main",{className:"w-full p-8 sm:p-12 bg-gray-900 text-white min-h-screen",children:(0,r.jsxs)("div",{className:"mx-auto max-w-7xl",children:[(0,r.jsx)("div",{className:"mb-10",children:(0,r.jsxs)(a(),{href:"/admin",className:"inline-flex items-center gap-2 text-sm text-cyan-400 hover:text-cyan-300 transition-colors",children:[(0,r.jsx)(c.A,{size:16})," Back to Admin Dashboard"]})}),(0,r.jsx)("div",{className:"flex flex-col md:flex-row justify-between md:items-center gap-4 mb-8",children:(0,r.jsx)("h1",{className:"text-4xl sm:text-5xl font-extrabold text-white",children:"User Management"})}),(0,r.jsxs)(l.P.div,{initial:{opacity:0},animate:{opacity:1},className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[(0,r.jsx)(k,{icon:(0,r.jsx)(u.A,{size:22}),title:"Total Users",value:E.total,colorClass:"bg-purple-500/20 text-purple-300"}),(0,r.jsx)(k,{icon:(0,r.jsx)(m,{size:22}),title:"Admins",value:E.admins,colorClass:"bg-red-500/20 text-red-300"}),(0,r.jsx)(k,{icon:(0,r.jsx)(p.A,{size:22}),title:"Regular Users",value:E.regularUsers,colorClass:"bg-blue-500/20 text-blue-300"}),(0,r.jsx)(k,{icon:(0,r.jsx)(p.A,{size:22}),title:"Premium Users",value:E.premiumUsers,colorClass:"bg-yellow-500/20 text-yellow-300"})]}),(0,r.jsxs)("div",{className:"relative mb-8",children:[(0,r.jsx)(x.A,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",size:18}),(0,r.jsx)("input",{type:"text",placeholder:"Search users by name or email...",value:w,onChange:e=>N(e.target.value),className:"w-full bg-gray-800 border border-gray-700 rounded-lg py-2 pl-10 pr-4 text-white placeholder-gray-500 focus:outline-none focus:ring-1 focus:ring-cyan-500"})]}),(0,r.jsx)(d.N,{children:_&&(0,r.jsx)(l.P.div,{initial:{opacity:0,y:-50},animate:{opacity:1,y:0},exit:{opacity:0,y:-50},transition:{duration:.3},className:`fixed top-5 right-5 p-4 rounded-md shadow-lg text-white z-50 ${"success"===_.type?"bg-green-600":"bg-red-600"}`,children:_.message})}),(0,r.jsx)("div",{className:"bg-gray-800/60 border border-gray-700/60 rounded-xl shadow-lg overflow-hidden",children:(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"min-w-full text-left",children:[(0,r.jsx)("thead",{className:"bg-gray-900/50",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"p-4 text-gray-300",children:"Full Name"}),(0,r.jsx)("th",{className:"p-4 text-gray-300",children:"Email"}),(0,r.jsx)("th",{className:"p-4 text-gray-300",children:"Last Signed In"}),(0,r.jsx)("th",{className:"p-4 text-gray-300",children:"Role"}),(0,r.jsx)("th",{className:"p-4 text-right text-gray-300",children:"Actions"})]})}),(0,r.jsx)("tbody",{children:h.length>0?h.map(e=>(0,r.jsxs)("tr",{className:"border-t border-gray-700/50 hover:bg-gray-700/30 transition-colors",children:[(0,r.jsx)("td",{className:"p-4 font-semibold text-white",children:e.full_name||"N/A"}),(0,r.jsx)("td",{className:"p-4 text-gray-400",children:e.email||"N/A"}),(0,r.jsx)("td",{className:"p-4 text-gray-400",children:e.last_sign_in_at?new Date(e.last_sign_in_at).toLocaleString():"Never"}),(0,r.jsx)("td",{className:"p-4",children:(0,r.jsx)("span",{className:`px-3 py-1 text-xs font-semibold rounded-full ${"admin"===e.role?"bg-red-500/20 text-red-300":"premium_user"===e.role?"bg-amber-500/20 text-amber-300":"bg-blue-500/20 text-blue-300"}`,children:e.role})}),(0,r.jsx)("td",{className:"p-4 text-right",children:(0,r.jsxs)("div",{className:"flex gap-3 justify-end items-center",children:[(0,r.jsx)("button",{onClick:()=>P(e),title:"Edit User",className:"text-cyan-400 hover:text-cyan-300 p-2 rounded-md hover:bg-gray-700 transition-colors",children:(0,r.jsx)(y,{size:18})}),(0,r.jsx)("button",{onClick:()=>z(e.id),title:"Send Password Reset Link",className:"text-yellow-400 hover:text-yellow-300 p-2 rounded-md hover:bg-gray-700 transition-colors",children:(0,r.jsx)(f,{size:18})}),(0,r.jsx)("button",{onClick:()=>M(e.id),title:"Delete User",className:"text-red-500 hover:text-red-400 p-2 rounded-md hover:bg-gray-700 transition-colors",children:(0,r.jsx)(g.A,{size:18})})]})})]},e.id)):(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:5,className:"text-center text-gray-500 py-16",children:"No users found."})})})]})})})]})}),(0,r.jsx)(d.N,{children:A&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(l.P.div,{className:"fixed inset-0 bg-black/60 z-40",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0}}),(0,r.jsx)(l.P.div,{initial:{x:"100%"},animate:{x:0},exit:{x:"100%"},transition:{type:"spring",stiffness:300,damping:30},className:"fixed top-0 right-0 h-full w-full max-w-lg bg-gray-900 shadow-2xl z-50 border-l border-gray-800",children:(0,r.jsx)(v,{user:A,onSave:(e,t)=>{b(s=>s.map(s=>s.id===e?{...s,...t}:s)),P(null),C({message:"User updated successfully!",type:"success"})},onCancel:()=>P(null)})},A.id)]})})]}):(0,r.jsx)(j.O,{})}},59229:(e,t,s)=>{"use strict";s.d(t,{AuthProvider:()=>n});var r=s(33952);(0,r.registerClientReference)(function(){throw Error("Attempted to call useAuth() from the server but useAuth is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/nyoupane/Documents/11TechMedia/QuizApp/khojney/khojney_main/khojney-app/new_khojney/khojney-main/src/components/AuthContext.tsx","useAuth");let n=(0,r.registerClientReference)(function(){throw Error("Attempted to call AuthProvider() from the server but AuthProvider is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/nyoupane/Documents/11TechMedia/QuizApp/khojney/khojney_main/khojney-app/new_khojney/khojney-main/src/components/AuthContext.tsx","AuthProvider")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},66543:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,30385,23)),Promise.resolve().then(s.t.bind(s,33737,23)),Promise.resolve().then(s.t.bind(s,86081,23)),Promise.resolve().then(s.t.bind(s,1904,23)),Promise.resolve().then(s.t.bind(s,35856,23)),Promise.resolve().then(s.t.bind(s,55492,23)),Promise.resolve().then(s.t.bind(s,89082,23)),Promise.resolve().then(s.t.bind(s,45812,23))},72088:()=>{},74075:e=>{"use strict";e.exports=require("zlib")},76029:e=>{function t(e){var t=Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id=76029,e.exports=t},79428:e=>{"use strict";e.exports=require("buffer")},79551:e=>{"use strict";e.exports=require("url")},81630:e=>{"use strict";e.exports=require("http")},89054:(e,t,s)=>{Promise.resolve().then(s.bind(s,59229))},91645:e=>{"use strict";e.exports=require("net")},94735:e=>{"use strict";e.exports=require("events")},97334:(e,t,s)=>{"use strict";s.d(t,{O:()=>o,e:()=>a});var r=s(13486),n=s(49989),i=s.n(n);let a=()=>(0,r.jsx)("main",{className:"flex min-h-screen flex-col items-center justify-center p-24",children:(0,r.jsx)("p",{children:"Loading admin section..."})}),o=()=>(0,r.jsxs)("main",{className:"flex min-h-screen flex-col items-center justify-center p-24",children:[(0,r.jsx)("h1",{className:"text-2xl text-red-500",children:"Access Denied"}),(0,r.jsx)("p",{className:"mt-4",children:"You must be an admin to view this page."}),(0,r.jsx)(i(),{href:"/",className:"text-blue-400 hover:text-blue-300 mt-6",children:"Go to Homepage"})]})},98510:(e,t,s)=>{"use strict";s.d(t,{N:()=>r});let r=(0,s(95681).createBrowserClient)("https://uxpdqthqyttujyvqwaeh.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InV4cGRxdGhxeXR0dWp5dnF3YWVoIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDg5NzE3MzgsImV4cCI6MjA2NDU0NzczOH0.clopYxo2qaXYmw4poLnEoJOe6hXXotZwR3GYZL_GdMQ")}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[50,199,253,154,989],()=>s(49230));module.exports=r})();