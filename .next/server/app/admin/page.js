(()=>{var e={};e.id=698,e.ids=[698],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},9431:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(84667).A)("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]])},9696:(e,t,s)=>{Promise.resolve().then(s.bind(s,87324))},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},11997:e=>{"use strict";e.exports=require("punycode")},13742:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(84667).A)("layout-grid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]])},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},23365:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(84667).A)("clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},27910:e=>{"use strict";e.exports=require("stream")},28221:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(84667).A)("user-plus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]])},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},34631:e=>{"use strict";e.exports=require("tls")},48175:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(84667).A)("circle-help",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},64047:(e,t,s)=>{"use strict";s.d(t,{default:()=>j});var r=s(13486),i=s(49989),a=s.n(i),n=s(54528),o=s(9431),c=s(48175),l=s(13742),d=s(28221),p=s(84667);let u=(0,p.A)("book-copy",[["path",{d:"M2 16V4a2 2 0 0 1 2-2h11",key:"spzkk5"}],["path",{d:"M22 18H11a2 2 0 1 0 0 4h10.5a.5.5 0 0 0 .5-.5v-15a.5.5 0 0 0-.5-.5H11a2 2 0 0 0-2 2v12",key:"1wz07i"}],["path",{d:"M5 14H4a2 2 0 1 0 0 4h1",key:"16gqf9"}]]),h=(0,p.A)("circle-plus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);var x=s(74782),m=s(23365);let y=({icon:e,title:t,value:s,description:i})=>(0,r.jsxs)(n.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"bg-gray-800/50 border border-gray-700/80 rounded-xl p-6",children:[(0,r.jsxs)("div",{className:"flex justify-between items-start",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-400",children:t}),(0,r.jsx)("div",{className:"text-gray-500",children:e})]}),(0,r.jsx)("p",{className:"text-4xl font-bold text-white mt-2",children:s}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:i})]}),g=({href:e,icon:t,title:s,description:i})=>(0,r.jsx)(a(),{href:e,children:(0,r.jsxs)("div",{className:"bg-gray-800/50 border border-gray-700/80 rounded-xl p-6 h-full hover:border-cyan-500/50 hover:bg-gray-800/80 transition-all duration-300 group",children:[(0,r.jsx)("div",{className:"text-cyan-400 mb-4",children:t}),(0,r.jsx)("h3",{className:"text-xl font-bold text-white mb-2 group-hover:text-cyan-300 transition-colors",children:s}),(0,r.jsx)("p",{className:"text-sm text-gray-400",children:i})]})});function j({user:e,stats:t,recentAttempts:s}){return(0,r.jsx)("main",{className:"min-h-screen w-full p-8 sm:p-12 bg-gray-900 text-white",children:(0,r.jsxs)("div",{className:"mx-auto max-w-7xl",children:[(0,r.jsxs)("div",{className:"mb-12",children:[(0,r.jsx)("h1",{className:"text-4xl font-bold text-white",children:"Admin Mission Control"}),(0,r.jsx)("p",{className:"text-lg text-gray-400 mt-1",children:"Oversee and manage the Khojney platform."})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-12",children:[(0,r.jsx)(y,{icon:(0,r.jsx)(o.A,{size:24}),title:"Total Users",value:t.users,description:"All signed up users"}),(0,r.jsx)(y,{icon:(0,r.jsx)(c.A,{size:24}),title:"Total Questions",value:t.questions,description:"Across all categories"}),(0,r.jsx)(y,{icon:(0,r.jsx)(l.A,{size:24}),title:"Total Categories",value:t.categories,description:"Published and unpublished"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,r.jsxs)("div",{className:"lg:col-span-2 grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsx)(n.P.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.5,delay:.1},children:(0,r.jsx)(g,{href:"/admin/users",icon:(0,r.jsx)(d.A,{size:32}),title:"User Management",description:"View user data, assign roles, and manage user access."})}),(0,r.jsx)(n.P.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.5,delay:.2},children:(0,r.jsx)(g,{href:"/admin/questions",icon:(0,r.jsx)(u,{size:32}),title:"Question Bank",description:"Add, edit, and bulk upload questions for all categories."})}),(0,r.jsx)(n.P.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.5,delay:.3},children:(0,r.jsx)(g,{href:"/admin/categories",icon:(0,r.jsx)(h,{size:32}),title:"Category Hub",description:"Create new quiz categories and manage their hierarchy."})}),(0,r.jsx)(n.P.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.5,delay:.4},children:(0,r.jsx)(g,{href:"/admin/analytics",icon:(0,r.jsx)(x.A,{size:32}),title:"Platform Analytics",description:"View detailed reports on quiz performance and user engagement."})})]}),(0,r.jsxs)(n.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.5},className:"lg:col-span-1 bg-gray-800/50 border border-gray-700/80 rounded-xl p-6",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,r.jsx)(m.A,{size:20,className:"text-gray-400"}),(0,r.jsx)("h3",{className:"text-xl font-bold text-white",children:"Recent Activity"})]}),(0,r.jsx)("ul",{className:"space-y-4",children:s.length>0?s.map(e=>(0,r.jsxs)("li",{className:"text-sm border-b border-gray-700/50 pb-3",children:[(0,r.jsxs)("p",{className:"font-semibold text-gray-200",children:[e.profiles?.full_name||"A user"," completed a quiz."]}),(0,r.jsxs)("p",{className:"text-gray-400",children:['"',e.categories?.name_en||"General Quiz",'" with score ',e.score]}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:new Date(e.created_at).toLocaleString()})]},e.id)):(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"No recent quiz attempts found."})})]})]})]})})}},69698:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>p,pages:()=>d,routeModule:()=>u,tree:()=>l});var r=s(24332),i=s(48819),a=s(67851),n=s.n(a),o=s(97540),c={};for(let e in o)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>o[e]);s.d(t,c);let l={children:["",{children:["admin",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,99306)),"/Users/nyoupane/Documents/11TechMedia/QuizApp/khojney/khojney_main/khojney-app/new_khojney/khojney-main/src/app/admin/page.tsx"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,9699))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(s.bind(s,20685)),"/Users/nyoupane/Documents/11TechMedia/QuizApp/khojney/khojney_main/khojney-app/new_khojney/khojney-main/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,19033,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(s.t.bind(s,39956,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(s.t.bind(s,92341,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,9699))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,d=["/Users/nyoupane/Documents/11TechMedia/QuizApp/khojney/khojney_main/khojney-app/new_khojney/khojney-main/src/app/admin/page.tsx"],p={require:s,loadChunk:()=>Promise.resolve()},u=new r.AppPageRouteModule({definition:{kind:i.RouteKind.APP_PAGE,page:"/admin/page",pathname:"/admin",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},73248:(e,t,s)=>{Promise.resolve().then(s.bind(s,64047))},74075:e=>{"use strict";e.exports=require("zlib")},74782:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(84667).A)("chart-column",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]])},79428:e=>{"use strict";e.exports=require("buffer")},79551:e=>{"use strict";e.exports=require("url")},81630:e=>{"use strict";e.exports=require("http")},87324:(e,t,s)=>{"use strict";s.d(t,{default:()=>r});let r=(0,s(33952).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/nyoupane/Documents/11TechMedia/QuizApp/khojney/khojney_main/khojney-app/new_khojney/khojney-main/src/app/admin/admin-client.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/nyoupane/Documents/11TechMedia/QuizApp/khojney/khojney_main/khojney-app/new_khojney/khojney-main/src/app/admin/admin-client.tsx","default")},91645:e=>{"use strict";e.exports=require("net")},94735:e=>{"use strict";e.exports=require("events")},99306:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>c});var r=s(38828),i=s(85296),a=s(65208),n=s(42543),o=s(87324);async function c(){let e=(0,a.UL)(),t=(0,i.createServerClient)("https://uxpdqthqyttujyvqwaeh.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InV4cGRxdGhxeXR0dWp5dnF3YWVoIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDg5NzE3MzgsImV4cCI6MjA2NDU0NzczOH0.clopYxo2qaXYmw4poLnEoJOe6hXXotZwR3GYZL_GdMQ",{cookies:{get:t=>e.get(t)?.value}}),{data:{session:s}}=await t.auth.getSession();s||(0,n.redirect)("/");let{data:c}=await t.from("profiles").select("role").eq("id",s.user.id).single();c?.role!=="admin"&&(0,n.notFound)();let[{count:l},{count:d},{count:p},{data:u,error:h}]=await Promise.all([t.from("profiles").select("*",{count:"exact",head:!0}),t.from("questions").select("*",{count:"exact",head:!0}),t.from("categories").select("*",{count:"exact",head:!0}),t.from("quiz_attempts").select("id, score, created_at, profiles(full_name), categories(name_en)").order("created_at",{ascending:!1}).limit(5)]);return(0,r.jsx)(o.default,{user:s.user,stats:{users:l??0,questions:d??0,categories:p??0},recentAttempts:u||[]})}}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[50,199,253,154,989,296,208,464],()=>s(69698));module.exports=r})();