(()=>{var e={};e.id=588,e.ids=[588],e.modules={1241:()=>{},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},4613:(e,t,s)=>{Promise.resolve().then(s.bind(s,21721))},9575:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(84667).A)("book-open",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]])},9699:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n});var r=s(41253);let n=async e=>[{type:"image/x-icon",sizes:"16x16",url:(0,r.fillMetadataSegment)(".",await e.params,"favicon.ico")+""}]},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},11997:e=>{"use strict";e.exports=require("punycode")},14276:()=>{},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},20685:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>l,metadata:()=>o});var r=s(38828),n=s(22282),i=s.n(n);s(14276);var a=s(59229);let o={title:"Khojney App",description:"Your awesome quiz application"};function l({children:e}){return(0,r.jsx)("html",{lang:"en",className:"dark",children:(0,r.jsx)("body",{className:i().className,children:(0,r.jsx)(a.AuthProvider,{children:e})})})}},21503:(e,t,s)=>{"use strict";s.d(t,{A:()=>c,AuthProvider:()=>d});var r=s(13486),n=s(60159),i=s(98510),a=s(60532);let o="user_role",l=(0,n.createContext)(void 0),c=()=>{let e=(0,n.useContext)(l);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e},d=({children:e})=>{let[t,s]=(0,n.useState)(null),[c,d]=(0,n.useState)(null),[u,x]=(0,n.useState)(!0);return(0,n.useEffect)(()=>{let e=async e=>{if(s(e),e?.user){let{data:t,error:s}=await i.N.from("profiles").select("role").eq("id",e.user.id).single();if(s)console.error("Error fetching user role:",s.message),d(null),a.A.remove(o);else if(t){d(t.role);let s=e.expires_in,r=s?new Date(Date.now()+1e3*s):void 0;a.A.set(o,t.role,{expires:r})}else console.warn("User profile not found for ID:",e.user.id),d(null),a.A.remove(o)}else d(null),a.A.remove(o);x(!1)};i.N.auth.getSession().then(({data:{session:t}})=>{e(t)});let{data:{subscription:t}}=i.N.auth.onAuthStateChange((t,s)=>{e(s)});return()=>t.unsubscribe()},[]),(0,r.jsx)(l.Provider,{value:{session:t,loadingAuth:u,userRole:c},children:e})}},21721:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>D});var r=s(13486),n=s(60159),i=s(49989),a=s.n(i),o=s(98510),l=s(4653),c=s(54528),d=s(92816),u=s(97430),x=s(79438),m=s(72513),h=s(5447),p=s(15998),g=s(74439),f=s(9575),y=s(23982),b=s(35795),j=s(68574),v=s(77026),_=s(1039),w=s(49391),N=s(37558),k=s(86e3),q=s(15577);let C=({checked:e,onChange:t})=>(0,r.jsx)("button",{type:"button",onClick:()=>t(!e),className:`${e?"bg-cyan-600":"bg-gray-600"} relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-cyan-500 focus:ring-offset-2 focus:ring-offset-gray-900`,role:"switch","aria-checked":e,children:(0,r.jsx)("span",{"aria-hidden":"true",className:`${e?"translate-x-5":"translate-x-0"} pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out`})}),A=({allCategories:e,selectedIds:t,setSelectedIds:s})=>{let[i,a]=(0,n.useState)(!1),[o,l]=(0,n.useState)(""),c=(0,n.useRef)(null),d=e.filter(e=>t.includes(e.id)),u=e.filter(e=>!t.includes(e.id)&&e.name_en.toLowerCase().includes(o.toLowerCase())),x=e=>{s(t.includes(e)?t.filter(t=>t!==e):[...t,e])};return(0,n.useEffect)(()=>{let e=e=>{c.current&&!c.current.contains(e.target)&&a(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[c]),(0,r.jsxs)("div",{className:"relative",ref:c,children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Categories"}),(0,r.jsxs)("div",{className:"w-full bg-gray-700 border border-gray-600 rounded-md p-2 flex flex-wrap gap-2 items-center min-h-[42px]",onClick:()=>a(!0),children:[d.map(e=>(0,r.jsxs)("span",{className:"bg-cyan-900/70 text-cyan-200 text-sm font-medium px-2 py-1 rounded flex items-center gap-2",children:[e.name_en,(0,r.jsx)("button",{type:"button",onClick:t=>{t.stopPropagation(),x(e.id)},className:"hover:text-white",children:(0,r.jsx)(_.A,{size:14})})]},e.id)),(0,r.jsx)("input",{type:"text",value:o,onChange:e=>{a(!0),l(e.target.value)},onFocus:()=>a(!0),placeholder:0===d.length?"Select categories...":"",className:"flex-grow bg-transparent focus:outline-none p-1 text-white"})]}),i&&(0,r.jsx)("ul",{className:"absolute z-10 mt-1 w-full max-h-60 overflow-auto rounded-md bg-gray-800 border border-gray-600 shadow-lg",children:u.length>0?u.map(e=>(0,r.jsx)("li",{onClick:()=>{x(e.id),l(""),a(!1)},className:"cursor-pointer select-none relative py-2 pl-3 pr-9 text-white hover:bg-cyan-600",children:e.name_en},e.id)):(0,r.jsx)("li",{className:"px-3 py-2 text-gray-500",children:"No categories found."})})]})};function P({question:e,allCategories:t,onSave:s,onCancel:i}){let[a,l]=(0,n.useState)(""),[c,d]=(0,n.useState)(""),[u,x]=(0,n.useState)("medium"),[m,h]=(0,n.useState)(!1),[p,f]=(0,n.useState)([{option_text_en:"",is_correct:!0},{option_text_en:"",is_correct:!1},{option_text_en:"",is_correct:!1},{option_text_en:"",is_correct:!1}]),[y,b]=(0,n.useState)([]),[j,v]=(0,n.useState)(!1),[P,S]=(0,n.useState)(null),z=(e,t)=>{let s=[...p];s[e].option_text_en=t,f(s)},M=e=>{f(p.map((t,s)=>({...t,is_correct:s===e})))},E=e=>{let t=p.filter((t,s)=>s!==e);!t.some(e=>e.is_correct)&&t.length>0&&(t[0].is_correct=!0),f(t)},D=async t=>{if(t.preventDefault(),v(!0),S(null),1!==p.filter(e=>e.is_correct).length){S("You must select exactly one correct answer."),v(!1);return}let r=p.filter(e=>""!==e.option_text_en.trim());if(r.length<2){S("Please provide at least two answer options."),v(!1);return}try{let t={question_text_en:a,explanation_en:c,difficulty_level:u,is_published:m,language:"en"},n=e?.id;if(n){let{error:e}=await o.N.from("questions").update(t).eq("id",n);if(e)throw e}else{let{data:e,error:s}=await o.N.from("questions").insert(t).select("id").single();if(s)throw s;n=e.id}if(!n)throw Error("Could not save the question.");await o.N.from("options").delete().eq("question_id",n);let i=r.map(e=>({question_id:n,option_text_en:e.option_text_en,is_correct:e.is_correct})),{error:l}=await o.N.from("options").insert(i);if(l)throw l;if(await o.N.from("question_categories").delete().eq("question_id",n),y.length>0){let e=y.map(e=>({question_id:n,category_id:e})),{error:t}=await o.N.from("question_categories").insert(e);if(t)throw t}s()}catch(e){console.error("Error saving question:",e),S(e.message||"An unexpected error occurred.")}finally{v(!1)}};return(0,r.jsxs)("div",{className:"flex flex-col h-full bg-gray-900",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center p-6 border-b border-gray-700 flex-shrink-0",children:[(0,r.jsxs)("h2",{className:"text-2xl font-bold text-white",children:[e?"Edit":"Create New"," Question"]}),(0,r.jsx)("button",{onClick:i,className:"p-2 text-gray-500 hover:text-white rounded-full hover:bg-gray-800 transition-colors",children:(0,r.jsx)(_.A,{size:24})})]}),(0,r.jsxs)("form",{onSubmit:D,className:"flex-grow p-6 space-y-6 overflow-y-auto",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"question_text_en",className:"block text-sm font-medium text-gray-300",children:"Question"}),(0,r.jsx)("textarea",{id:"question_text_en",value:a,onChange:e=>l(e.target.value),required:!0,rows:3,className:"w-full px-3 py-2 mt-1 text-white bg-gray-800 border border-gray-700 rounded-md focus:outline-none focus:ring-2 focus:ring-cyan-500"})]}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-300",children:"Answer Options (Select one correct answer)"}),p.map((e,t)=>(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("button",{type:"button",onClick:()=>M(t),className:`flex-shrink-0 h-6 w-6 rounded-full border-2 flex items-center justify-center transition-all ${e.is_correct?"border-green-500 bg-green-500":"border-gray-500 hover:border-green-500"}`,children:e.is_correct&&(0,r.jsx)(w.A,{size:16,className:"text-white"})}),(0,r.jsx)("input",{type:"text",placeholder:`Option ${t+1}`,value:e.option_text_en,onChange:e=>z(t,e.target.value),className:"w-full px-3 py-2 text-white bg-gray-800 border border-gray-700 rounded-md focus:outline-none focus:ring-2 focus:ring-cyan-500"}),(0,r.jsx)("button",{type:"button",onClick:()=>E(t),disabled:p.length<=2,className:"p-2 text-gray-500 hover:text-red-500 disabled:text-gray-700 disabled:cursor-not-allowed transition-colors",children:(0,r.jsx)(N.A,{size:18})})]},t)),(0,r.jsxs)("button",{type:"button",onClick:()=>{f([...p,{option_text_en:"",is_correct:!1}])},className:"text-sm text-cyan-400 hover:text-cyan-300 inline-flex items-center gap-1",children:[(0,r.jsx)(g.A,{size:16})," Add Option"]})]}),(0,r.jsx)(A,{allCategories:t,selectedIds:y,setSelectedIds:b}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"difficulty",className:"block text-sm font-medium text-gray-300",children:"Difficulty"}),(0,r.jsxs)("select",{id:"difficulty",value:u,onChange:e=>x(e.target.value),className:"w-full px-3 py-2 mt-1 text-white bg-gray-800 border border-gray-700 rounded-md focus:outline-none focus:ring-2 focus:ring-cyan-500",children:[(0,r.jsx)("option",{value:"easy",children:"Easy"}),(0,r.jsx)("option",{value:"medium",children:"Medium"}),(0,r.jsx)("option",{value:"hard",children:"Hard"})]})]}),(0,r.jsxs)("div",{className:"flex flex-col justify-start pt-2",children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-300",children:"Status"}),(0,r.jsxs)("div",{className:"flex items-center gap-3 mt-2",children:[(0,r.jsx)(C,{checked:m,onChange:h}),(0,r.jsx)("span",{className:"text-sm text-gray-200",children:m?"Published":"Draft"})]})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{htmlFor:"explanation_en",className:"block text-sm font-medium text-gray-300",children:["Explanation ",(0,r.jsx)("span",{className:"text-gray-500",children:"(Optional)"})]}),(0,r.jsx)("textarea",{id:"explanation_en",value:c,onChange:e=>d(e.target.value),rows:2,className:"w-full px-3 py-2 mt-1 text-white bg-gray-800 border border-gray-700 rounded-md focus:outline-none focus:ring-2 focus:ring-cyan-500"})]})]}),(0,r.jsxs)("div",{className:"flex-shrink-0 p-6 border-t border-gray-700 bg-gray-900 flex justify-between items-center",children:[P&&(0,r.jsxs)("div",{className:"flex items-center gap-2 text-red-400 text-sm",children:[(0,r.jsx)(k.A,{size:18}),(0,r.jsx)("span",{children:P})]}),(0,r.jsx)("div",{className:"flex-grow"}),(0,r.jsxs)("div",{className:"flex gap-4",children:[(0,r.jsx)("button",{type:"button",onClick:i,className:"px-5 py-2 font-bold text-gray-300 bg-gray-700/50 rounded-md hover:bg-gray-700 transition-colors",children:"Cancel"}),(0,r.jsxs)("button",{type:"button",onClick:()=>document.querySelector("form")?.requestSubmit(),className:"px-5 py-2 font-bold text-white bg-cyan-600 rounded-md hover:bg-cyan-500 disabled:bg-gray-500 flex items-center gap-2",disabled:j,children:[j&&(0,r.jsx)(q.A,{size:16,className:"animate-spin"}),j?"Saving...":"Save Question"]})]})]})]})}let S=()=>(0,r.jsx)("main",{className:"flex min-h-screen w-full items-center justify-center bg-gray-900",children:(0,r.jsx)("p",{className:"text-lg text-gray-400",children:"Loading Admin Section..."})}),z=()=>(0,r.jsxs)("main",{className:"flex min-h-screen flex-col items-center justify-center p-8 text-center bg-gray-900",children:[(0,r.jsx)(d.A,{className:"w-16 h-16 text-red-500 mb-4"}),(0,r.jsx)("h1",{className:"text-2xl font-bold text-red-400",children:"Access Denied"}),(0,r.jsx)("p",{className:"mt-2 text-gray-400",children:"You do not have the required permissions to view this page."}),(0,r.jsx)(a(),{href:"/",className:"text-cyan-400 hover:text-cyan-300 mt-6",children:"Go to Homepage"})]}),M=({icon:e,title:t,value:s,colorClass:n})=>(0,r.jsx)("div",{className:"bg-gray-800/50 border border-gray-700/80 rounded-xl p-5",children:(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsx)("div",{className:`flex-shrink-0 w-10 h-10 rounded-lg flex items-center justify-center ${n}`,children:e}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-400",children:t}),(0,r.jsx)("p",{className:"text-2xl font-bold text-white",children:s})]})]})}),E=({allCategories:e,onUploadComplete:t})=>{let[s,i]=(0,n.useState)(null),[a,l]=(0,n.useState)(!1),[c,p]=(0,n.useState)(null),g=e=>{let t=e.split("\n").filter(e=>""!==e.trim());if(t.length<2)return[];let s=t[0].split(",").map(e=>e.trim()),r=[];for(let e=1;e<t.length;e++){let n=t[e].split(",").map(e=>e.trim().replace(/"/g,"")),i={};s.forEach((e,t)=>i[e]=n[t]);let a={question_text_en:i.question_text_en,difficulty_level:i.difficulty_level,points:parseInt(i.points,10),explanation_en:i.explanation_en,is_published:!i.is_published||"true"===i.is_published.toLowerCase(),language:i.language||"en",options:[],categories:i.categories?i.categories.split("|").map(e=>e.trim()):[]};for(let e=1;e<=4;e++)i[`option${e}_text`]&&a.options.push({option_text_en:i[`option${e}_text`],is_correct:i[`option${e}_is_correct`]?.toLowerCase()==="true"});r.push(a)}return r},f=async()=>{if(!s)return;l(!0),p(null);let r=new FileReader;r.onload=async s=>{try{let r=s.target?.result;if("string"!=typeof r)throw Error("Could not read file content.");let n=g(r),i=new Map(e.map(e=>[e.name_en.toLowerCase(),e.id])),a=0;for(let e of n){let{data:t,error:s}=await o.N.from("questions").insert({question_text_en:e.question_text_en,difficulty_level:e.difficulty_level,points:e.points,is_published:e.is_published??!0,explanation_en:e.explanation_en,language:e.language??"en"}).select("id").single();if(s)throw Error(`Adding question "${e.question_text_en.substring(0,20)}...": ${s.message}`);let r=t.id,n=e.options.map(e=>({question_id:r,...e}));await o.N.from("options").insert(n);let l=e.categories.map(e=>i.get(e.toLowerCase())).filter(e=>!!e);if(l.length>0){let e=l.map(e=>({question_id:r,category_id:e}));await o.N.from("question_categories").insert(e)}a++}p({type:"success",message:`Successfully added ${a} questions!`}),t()}catch(e){p({type:"error",message:e.message||"An unknown error occurred."})}finally{l(!1),i(null)}},r.readAsText(s)};return(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 my-12",children:[(0,r.jsxs)("div",{className:"bg-slate-800/50 p-6 rounded-xl border border-slate-700",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,r.jsx)(u.A,{className:"h-6 w-6 text-cyan-400"}),(0,r.jsx)("h3",{className:"text-xl font-bold text-white",children:"Bulk Import Questions"})]}),(0,r.jsx)("p",{className:"text-sm text-slate-400 mb-4",children:"Upload a CSV file with multiple questions."}),(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsx)("label",{htmlFor:"file-upload",className:"cursor-pointer bg-slate-700 text-white font-semibold py-2 px-4 rounded-lg hover:bg-slate-600 transition-colors",children:s?"File Selected":"Choose File"}),(0,r.jsx)("input",{id:"file-upload",type:"file",className:"hidden",accept:".csv",onChange:e=>{e.target.files&&(i(e.target.files[0]),p(null))}}),(0,r.jsx)("span",{className:"text-slate-500 text-sm truncate",children:s?.name||"No file chosen"})]}),(0,r.jsx)("button",{onClick:f,disabled:!s||a,className:"w-full mt-4 py-2.5 px-4 rounded-lg bg-cyan-600 text-white font-bold hover:bg-cyan-500 disabled:bg-slate-600 disabled:cursor-not-allowed transition-colors",children:a?"Uploading...":"Upload Questions"}),c&&(0,r.jsxs)("div",{className:`mt-4 p-3 rounded-md text-sm flex items-center gap-2 ${"success"===c.type?"bg-green-500/20 text-green-300":"bg-red-500/20 text-red-300"}`,children:["success"===c.type?(0,r.jsx)(x.A,{size:16}):(0,r.jsx)(d.A,{size:16}),c.message]})]}),(0,r.jsxs)("div",{className:"bg-slate-800/50 p-6 rounded-xl border border-slate-700",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)(m.A,{className:"h-6 w-6 text-slate-400"}),(0,r.jsx)("h3",{className:"text-xl font-bold text-white",children:"CSV Data Format"})]}),(0,r.jsxs)("button",{onClick:()=>{let e=encodeURI('data:text/csv;charset=utf-8,question_text_en,difficulty_level,points,explanation_en,is_published,language,categories,option1_text,option1_is_correct,option2_text,option2_is_correct,option3_text,option3_is_correct,option4_text,option4_is_correct\n"What is the capital of France?","easy",1,"Paris is the capital city.","true","en","General Knowledge|Geography","London","false","Paris","true","Berlin","false","Madrid","false"'),t=document.createElement("a");t.setAttribute("href",e),t.setAttribute("download","sample_questions.csv"),document.body.appendChild(t),t.click(),document.body.removeChild(t)},className:"flex items-center gap-2 text-sm bg-slate-700 text-white font-semibold py-2 px-3 rounded-lg hover:bg-slate-600 transition-colors",children:[(0,r.jsx)(h.A,{size:16})," Download Sample"]})]}),(0,r.jsx)("p",{className:"text-sm text-slate-400 mb-4",children:'File must have these exact headers. Use "|" to separate multiple categories.'}),(0,r.jsx)("pre",{className:"bg-black/50 p-4 rounded-md text-xs text-slate-300 overflow-x-auto",children:(0,r.jsx)("code",{children:"question_text_en, difficulty_level, points, language, categories, option1_text, ..."})})]})]})};function D(){let[e,t]=(0,n.useState)(!0),[s,i]=(0,n.useState)(!1),[d,u]=(0,n.useState)([]),[m,h]=(0,n.useState)([]),[_,w]=(0,n.useState)(!1),[N,k]=(0,n.useState)(null),[q,C]=(0,n.useState)(""),[A,D]=(0,n.useState)("all"),[I,Q]=(0,n.useState)({key:"created_at",direction:"desc"}),[U,F]=(0,n.useState)(1),L=(0,n.useCallback)(async()=>{try{let{data:e,error:t}=await o.N.from("questions").select("id, question_text_en, is_published, created_at, question_categories ( categories ( name_en ) )").order("created_at",{ascending:!1}),{data:s,error:r}=await o.N.from("categories").select("id, name_en").order("name_en",{ascending:!0});if(t)throw t;if(r)throw r;u(e||[]),h(s||[])}catch(e){console.error("Error fetching data:",e)}},[]),G=async e=>{try{let{data:t,error:s}=await o.N.from("questions").select("*, options (*), question_categories (category_id)").eq("id",e.id).single();if(s)throw s;k(t),w(!0)}catch(e){console.error("Error fetching full question details for editing:",e),alert("Could not load question details for editing.")}},O=(0,n.useMemo)(()=>{let e=d.filter(e=>e.is_published).length;return{total:d.length,published:e,drafts:d.length-e}},[d]),$=(0,n.useMemo)(()=>[...d].filter(e=>e.question_text_en.toLowerCase().includes(q.toLowerCase())).filter(e=>"all"===A||("published"===A?e.is_published:!e.is_published)).sort((e,t)=>{let s=e[I.key],r=t[I.key];return s<r?"asc"===I.direction?-1:1:s>r?"asc"===I.direction?1:-1:0}),[d,q,A,I]),R=(0,n.useMemo)(()=>{let e=(U-1)*10;return $.slice(e,e+10)},[$,U]),T=Math.ceil($.length/10),V=e=>{let t=I.key===e&&"asc"===I.direction?"desc":"asc";Q({key:e,direction:t})};return e?(0,r.jsx)(S,{}):s?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(l.N,{children:_&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(c.P.div,{className:"fixed inset-0 bg-black/60 z-40",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0}}),(0,r.jsx)(c.P.div,{initial:{x:"100%"},animate:{x:0},exit:{x:"100%"},transition:{type:"spring",stiffness:300,damping:30},className:"fixed top-0 right-0 h-full w-full max-w-2xl bg-gray-900 shadow-2xl z-50 border-l border-gray-800",children:(0,r.jsx)(P,{question:N,allCategories:m,onSave:()=>{w(!1),k(null),L()},onCancel:()=>{w(!1),k(null)}})},N?N.id:"create-new-question")]})}),(0,r.jsx)("main",{className:"w-full p-8 sm:p-12 bg-gray-900 text-white min-h-screen",children:(0,r.jsxs)("div",{className:"mx-auto max-w-7xl",children:[(0,r.jsx)("div",{className:"mb-10",children:(0,r.jsxs)(a(),{href:"/admin",className:"inline-flex items-center gap-2 text-sm text-cyan-400 hover:text-cyan-300",children:[(0,r.jsx)(p.A,{size:16})," Back to Admin Dashboard"]})}),(0,r.jsxs)("div",{className:"flex flex-col md:flex-row justify-between md:items-center gap-4 mb-8",children:[(0,r.jsx)("h1",{className:"text-4xl font-bold",children:"Question Management"}),(0,r.jsxs)("button",{onClick:()=>{k(null),w(!0)},className:"inline-flex items-center justify-center gap-2 bg-cyan-600 hover:bg-cyan-500 text-white font-bold py-2 px-5 rounded-lg transition-colors",children:[(0,r.jsx)(g.A,{size:18})," New Question"]})]}),(0,r.jsxs)(c.P.div,{initial:{opacity:0},animate:{opacity:1},className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[(0,r.jsx)(M,{icon:(0,r.jsx)(f.A,{size:22}),title:"Total Questions",value:O.total,colorClass:"bg-blue-500/20 text-blue-300"}),(0,r.jsx)(M,{icon:(0,r.jsx)(x.A,{size:22}),title:"Published",value:O.published,colorClass:"bg-green-500/20 text-green-300"}),(0,r.jsx)(M,{icon:(0,r.jsx)(y.A,{size:22}),title:"Drafts",value:O.drafts,colorClass:"bg-yellow-500/20 text-yellow-300"})]}),(0,r.jsx)(E,{allCategories:m,onUploadComplete:L}),(0,r.jsxs)("div",{className:"flex flex-col md:flex-row gap-4 mb-4",children:[(0,r.jsxs)("div",{className:"relative flex-grow",children:[(0,r.jsx)(b.A,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",size:18}),(0,r.jsx)("input",{type:"text",placeholder:"Search questions...",value:q,onChange:e=>C(e.target.value),className:"w-full bg-gray-800 border border-gray-700 rounded-lg py-2 pl-10 pr-4 text-white focus:outline-none focus:ring-1 focus:ring-cyan-500"})]}),(0,r.jsxs)("select",{value:A,onChange:e=>D(e.target.value),className:"bg-gray-800 border border-gray-700 rounded-lg py-2 px-3 text-white focus:outline-none focus:ring-1 focus:ring-cyan-500",children:[(0,r.jsx)("option",{value:"all",children:"All Statuses"}),(0,r.jsx)("option",{value:"published",children:"Published"}),(0,r.jsx)("option",{value:"draft",children:"Draft"})]})]}),(0,r.jsx)("div",{className:"bg-gray-800/60 border border-gray-700/60 rounded-xl shadow-lg overflow-hidden",children:(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"min-w-full text-left",children:[(0,r.jsx)("thead",{className:"bg-gray-900/50",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"p-4 cursor-pointer hover:bg-gray-700/50 transition-colors",onClick:()=>V("question_text_en"),children:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:["Question ",(0,r.jsx)(j.A,{size:14})]})}),(0,r.jsx)("th",{className:"p-4",children:"Categories"}),(0,r.jsx)("th",{className:"p-4 cursor-pointer hover:bg-gray-700/50 transition-colors",onClick:()=>V("is_published"),children:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:["Status ",(0,r.jsx)(j.A,{size:14})]})}),(0,r.jsx)("th",{className:"p-4 text-right",children:"Actions"})]})}),(0,r.jsx)("tbody",{children:R.length>0?R.map(e=>(0,r.jsxs)("tr",{className:"border-t border-gray-700/50 hover:bg-gray-700/50",children:[(0,r.jsx)("td",{className:"p-4 font-medium max-w-md truncate",title:e.question_text_en,children:e.question_text_en}),(0,r.jsx)("td",{className:"p-4 text-gray-400 text-sm max-w-xs truncate",children:e.question_categories.map(e=>e.categories?.name_en).join(", ")}),(0,r.jsx)("td",{className:"p-4",children:(0,r.jsx)("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${e.is_published?"bg-green-500/20 text-green-300":"bg-yellow-500/20 text-yellow-300"}`,children:e.is_published?"Published":"Draft"})}),(0,r.jsx)("td",{className:"p-4 text-right",children:(0,r.jsxs)("button",{onClick:()=>G(e),className:"text-cyan-400 hover:text-cyan-300 inline-flex items-center gap-1",children:[(0,r.jsx)(v.A,{size:14})," Edit"]})})]},e.id)):(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:4,className:"text-center text-gray-500 py-16",children:"No questions found matching your criteria."})})})]})})}),T>1&&(0,r.jsxs)("div",{className:"flex items-center justify-between mt-6 text-sm",children:[(0,r.jsx)("button",{onClick:()=>F(e=>Math.max(1,e-1)),disabled:1===U,className:"flex items-center gap-2 px-4 py-2 bg-gray-700/80 rounded-md disabled:opacity-50 hover:bg-gray-700/100 transition-colors",children:"Previous"}),(0,r.jsxs)("span",{className:"font-semibold text-gray-300",children:["Page ",U," of ",T]}),(0,r.jsx)("button",{onClick:()=>F(e=>Math.min(T,e+1)),disabled:U===T,className:"flex items-center gap-2 px-4 py-2 bg-gray-700/80 rounded-md disabled:opacity-50 hover:bg-gray-700/100 transition-colors",children:"Next"})]})]})})]}):(0,r.jsx)(z,{})}},27910:e=>{"use strict";e.exports=require("stream")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},34631:e=>{"use strict";e.exports=require("tls")},37558:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(84667).A)("trash-2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},49391:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(84667).A)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},54871:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,69355,23)),Promise.resolve().then(s.t.bind(s,54439,23)),Promise.resolve().then(s.t.bind(s,67851,23)),Promise.resolve().then(s.t.bind(s,94730,23)),Promise.resolve().then(s.t.bind(s,19774,23)),Promise.resolve().then(s.t.bind(s,53170,23)),Promise.resolve().then(s.t.bind(s,20968,23)),Promise.resolve().then(s.t.bind(s,78298,23))},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},57510:(e,t,s)=>{Promise.resolve().then(s.bind(s,21503))},59229:(e,t,s)=>{"use strict";s.d(t,{AuthProvider:()=>n});var r=s(33952);(0,r.registerClientReference)(function(){throw Error("Attempted to call useAuth() from the server but useAuth is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/nyoupane/Documents/11TechMedia/QuizApp/khojney/khojney_main/khojney-app/new_khojney/khojney-main/src/components/AuthContext.tsx","useAuth");let n=(0,r.registerClientReference)(function(){throw Error("Attempted to call AuthProvider() from the server but AuthProvider is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/nyoupane/Documents/11TechMedia/QuizApp/khojney/khojney_main/khojney-app/new_khojney/khojney-main/src/components/AuthContext.tsx","AuthProvider")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},63356:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});let r=(0,s(33952).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/nyoupane/Documents/11TechMedia/QuizApp/khojney/khojney_main/khojney-app/new_khojney/khojney-main/src/app/admin/questions/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/nyoupane/Documents/11TechMedia/QuizApp/khojney/khojney_main/khojney-app/new_khojney/khojney-main/src/app/admin/questions/page.tsx","default")},66543:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,30385,23)),Promise.resolve().then(s.t.bind(s,33737,23)),Promise.resolve().then(s.t.bind(s,86081,23)),Promise.resolve().then(s.t.bind(s,1904,23)),Promise.resolve().then(s.t.bind(s,35856,23)),Promise.resolve().then(s.t.bind(s,55492,23)),Promise.resolve().then(s.t.bind(s,89082,23)),Promise.resolve().then(s.t.bind(s,45812,23))},72088:()=>{},74075:e=>{"use strict";e.exports=require("zlib")},76029:e=>{function t(e){var t=Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id=76029,e.exports=t},79428:e=>{"use strict";e.exports=require("buffer")},79551:e=>{"use strict";e.exports=require("url")},81630:e=>{"use strict";e.exports=require("http")},89054:(e,t,s)=>{Promise.resolve().then(s.bind(s,59229))},91461:(e,t,s)=>{Promise.resolve().then(s.bind(s,63356))},91645:e=>{"use strict";e.exports=require("net")},94735:e=>{"use strict";e.exports=require("events")},97594:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>a.a,__next_app__:()=>u,pages:()=>d,routeModule:()=>x,tree:()=>c});var r=s(24332),n=s(48819),i=s(67851),a=s.n(i),o=s(97540),l={};for(let e in o)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);s.d(t,l);let c={children:["",{children:["admin",{children:["questions",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,63356)),"/Users/nyoupane/Documents/11TechMedia/QuizApp/khojney/khojney_main/khojney-app/new_khojney/khojney-main/src/app/admin/questions/page.tsx"]}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,9699))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(s.bind(s,20685)),"/Users/nyoupane/Documents/11TechMedia/QuizApp/khojney/khojney_main/khojney-app/new_khojney/khojney-main/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,19033,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(s.t.bind(s,39956,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(s.t.bind(s,92341,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,9699))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,d=["/Users/nyoupane/Documents/11TechMedia/QuizApp/khojney/khojney_main/khojney-app/new_khojney/khojney-main/src/app/admin/questions/page.tsx"],u={require:s,loadChunk:()=>Promise.resolve()},x=new r.AppPageRouteModule({definition:{kind:n.RouteKind.APP_PAGE,page:"/admin/questions/page",pathname:"/admin/questions",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},98510:(e,t,s)=>{"use strict";s.d(t,{N:()=>r});let r=(0,s(95681).createBrowserClient)("https://uxpdqthqyttujyvqwaeh.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InV4cGRxdGhxeXR0dWp5dnF3YWVoIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDg5NzE3MzgsImV4cCI6MjA2NDU0NzczOH0.clopYxo2qaXYmw4poLnEoJOe6hXXotZwR3GYZL_GdMQ")}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[50,199,253,154,989,815],()=>s(97594));module.exports=r})();