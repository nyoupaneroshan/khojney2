(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[93],{36958:(e,t,s)=>{"use strict";s.d(t,{N:()=>a});let a=(0,s(36154).createBrowserClient)("https://uxpdqthqyttujyvqwaeh.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InV4cGRxdGhxeXR0dWp5dnF3YWVoIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDg5NzE3MzgsImV4cCI6MjA2NDU0NzczOH0.clopYxo2qaXYmw4poLnEoJOe6hXXotZwR3GYZL_GdMQ")},42400:(e,t,s)=>{Promise.resolve().then(s.bind(s,98623))},98623:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>ec});var a=s(54568),r=s(7620),i=s(27261),o=s.n(i),l=s(36958),n=s(30149),c=s(58138),d=s(34503),m=s(17296),x=s(45155),u=s(71402),h=s(69847),g=s(35493),p=s(132),f=s(38573),y=s(57617),j=s(88374),b=s(52290),v=s(2445),N=s(54310),w=s(32987),_=s(60607);function z(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,_.QP)((0,w.$)(t))}let S=N.bL,A=N.l9;N.Mz;let k=r.forwardRef((e,t)=>{let{className:s,align:r="center",sideOffset:i=4,...o}=e;return(0,a.jsx)(N.ZL,{children:(0,a.jsx)(N.UC,{ref:t,align:r,sideOffset:i,className:z("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-popover-content-transform-origin]",s),...o})})});k.displayName=N.UC.displayName;var q=s(79649);let D=(0,s(615).F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),C=r.forwardRef((e,t)=>{let{className:s,variant:r,size:i,asChild:o=!1,...l}=e,n=o?q.DX:"button";return(0,a.jsx)(n,{className:z(D({variant:r,size:i,className:s})),ref:t,...l})});C.displayName="Button";var I=s(15870),L=s(27911),P=s(32428);function O(e){let{className:t,classNames:s,showOutsideDays:r=!0,...i}=e;return(0,a.jsx)(P.h,{showOutsideDays:r,className:z("p-3",t),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:z(D({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:z(D({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"text-muted-foreground opacity-50",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...s},components:{IconLeft:e=>{let{...t}=e;return(0,a.jsx)(I.A,{className:"h-4 w-4"})},IconRight:e=>{let{...t}=e;return(0,a.jsx)(L.A,{className:"h-4 w-4"})}},...i})}O.displayName="Calendar";var U=s(32545),F=s(66734),E=s(22935),Q=s(49369),M=s(99966),T=s(25347),G=s(71467),R=s(82055),J=s(13643),X=s(65865),Y=s(88276),K=s(3991),V=s(93385),W=s(40368),Z=s(46141),B=s(83052),H=s(13185),$=s(62942);let ee=e=>{let{icon:t,title:s,value:r,trend:i,unit:o=""}=e,l=i>=0;return(0,a.jsxs)("div",{className:"bg-gray-800/50 border border-gray-700/80 rounded-xl p-6",children:[" ",(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[" ",(0,a.jsx)("p",{className:"text-sm font-medium text-gray-400",children:s})," ",(0,a.jsx)("div",{className:"text-gray-500",children:t})," "]})," ",(0,a.jsxs)("div",{className:"flex items-baseline gap-2",children:[" ",(0,a.jsxs)("p",{className:"text-4xl font-bold text-white mt-2",children:[r,o]})," ",(0,a.jsxs)("div",{className:"flex items-center text-sm font-semibold ".concat(l?"text-green-400":"text-red-400"),children:[" ",l?(0,a.jsx)(F.A,{size:16}):(0,a.jsx)(E.A,{size:16})," ",(0,a.jsxs)("span",{children:[Math.abs(i).toFixed(1),"%"]})," "]})," "]})," ",(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"vs. previous period"})," "]})},et=()=>(0,a.jsxs)("div",{className:"bg-gray-800/50 border border-gray-700/80 rounded-xl p-6 animate-pulse",children:[" ",(0,a.jsx)("div",{className:"h-4 bg-gray-700 rounded w-1/3 mb-4"})," ",(0,a.jsx)("div",{className:"h-10 bg-gray-700 rounded w-1/2"})," ",(0,a.jsx)("div",{className:"h-3 bg-gray-700 rounded w-1/4 mt-2"})," "]}),es=e=>{let{message:t,icon:s}=e;return(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center h-full text-center text-gray-500 p-6",children:[" ",s," ",(0,a.jsx)("p",{className:"mt-2 text-sm",children:t})," "]})},ea=()=>(0,a.jsx)("main",{className:"flex min-h-screen items-center justify-center bg-gray-900",children:(0,a.jsx)(Q.A,{className:"h-12 w-12 text-cyan-400 animate-spin"})}),er=()=>(0,a.jsxs)("main",{className:"flex min-h-screen flex-col items-center justify-center p-8 text-center bg-gray-900",children:[" ",(0,a.jsx)(M.A,{className:"w-16 h-16 text-red-500 mb-4"})," ",(0,a.jsx)("h1",{className:"text-2xl font-bold text-red-400",children:"Access Denied"})," ",(0,a.jsx)("p",{className:"mt-2 text-gray-400",children:"You do not have permission to view this page."})," ",(0,a.jsx)(o(),{href:"/",className:"text-cyan-400 hover:text-cyan-300 mt-6",children:"Go to Homepage"})," "]}),ei=e=>{let{title:t,questions:s,icon:r,colorClass:i}=e;return(0,a.jsxs)("div",{className:"bg-gray-800/50 border border-gray-700/80 rounded-xl p-6 h-full min-h-[300px]",children:[" ",(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,a.jsx)("div",{className:"text-lg ".concat(i),children:r}),(0,a.jsx)("h3",{className:"font-bold text-white",children:t})]})," ",0===s.length?(0,a.jsx)(es,{message:"Not enough data to calculate question difficulty.",icon:(0,a.jsx)(T.A,{size:32})}):(0,a.jsxs)("ul",{className:"space-y-3 text-sm",children:[" ",s.map(e=>(0,a.jsxs)("li",{className:"flex justify-between items-center border-b border-gray-700/50 pb-2 last:border-b-0",children:[(0,a.jsx)("span",{className:"text-gray-300 w-4/5 truncate",title:e.questions.question_text_en,children:e.questions.question_text_en}),(0,a.jsxs)("span",{className:"font-bold ".concat(i),children:[e.correct_percentage.toFixed(1),"%"]})]},e.question_id))," "]})," "]})},eo=e=>{let{users:t}=e;return(0,a.jsxs)("div",{className:"bg-gray-800/50 border border-gray-700/80 rounded-xl p-6 h-full min-h-[300px]",children:[" ",(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,a.jsx)(G.A,{size:20,className:"text-yellow-400"}),(0,a.jsx)("h3",{className:"font-bold text-white",children:"Top Users"})]})," ",0===t.length?(0,a.jsx)(es,{message:"No users with scores in this period.",icon:(0,a.jsx)(R.A,{size:32})}):(0,a.jsxs)("ol",{className:"space-y-3 text-sm",children:[" ",t.map((e,t)=>(0,a.jsxs)("li",{className:"flex items-center justify-between border-b border-gray-700/50 pb-2 last:border-b-0",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("span",{className:"font-bold text-gray-500 w-6 text-center",children:t+1}),(0,a.jsx)("span",{className:"text-gray-200 truncate",children:e.full_name||"Unnamed User"})]}),(0,a.jsxs)("span",{className:"font-bold text-white",children:[e.total_score||0," pts"]})]},e.id))," "]})," "]})},el=e=>{let{data:t}=e,s=["#06b6d4","#22d3ee","#67e8f9","#a5f3fc","#cffafe"];return(0,a.jsxs)("div",{className:"col-span-12 lg:col-span-7 bg-gray-800/50 border border-gray-700/80 rounded-xl p-6 h-96",children:[" ",(0,a.jsx)("h3",{className:"font-bold text-white mb-4",children:"Category Performance"})," ",0===t.length?(0,a.jsx)(es,{message:"No category data available for this selection.",icon:(0,a.jsx)(J.A,{size:32})}):(0,a.jsxs)(n.u,{width:"100%",height:"90%",children:[" ",(0,a.jsxs)(c.E,{data:t,layout:"vertical",margin:{top:5,right:20,left:30,bottom:5},children:[" ",(0,a.jsx)(d.d,{strokeDasharray:"3 3",strokeOpacity:.1})," ",(0,a.jsx)(m.W,{type:"number",stroke:"#9ca3af",fontSize:12})," ",(0,a.jsx)(x.h,{type:"category",dataKey:"name",width:100,stroke:"#9ca3af",fontSize:12,tickLine:!1,axisLine:!1})," ",(0,a.jsx)(u.m,{contentStyle:{backgroundColor:"#1f2937",border:"1px solid #4b5563"},cursor:{fill:"rgba(255, 255, 255, 0.1)"}})," ",(0,a.jsx)(h.s,{})," ",(0,a.jsxs)(g.y,{dataKey:"avgScore",name:"Avg Score",children:[" ",t.map((e,t)=>(0,a.jsx)(p.f,{fill:s[t%s.length]},"cell-".concat(t)))," "]})," ",(0,a.jsx)(g.y,{dataKey:"quizzes",name:"Total Quizzes",fill:"#82ca9d"})," "]})," "]})," "]})},en=e=>{let{data:t}=e;return(0,a.jsxs)("div",{className:"col-span-12 bg-gray-800/50 border border-gray-700/80 rounded-xl p-6",children:[" ",(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,a.jsx)(X.A,{size:20,className:"text-purple-400"}),(0,a.jsx)("h3",{className:"font-bold text-white",children:"Quiz Performance Details"})]})," ",0===t.length?(0,a.jsx)(es,{message:"No individual quiz performance data for this selection.",icon:(0,a.jsx)(T.A,{size:32})}):(0,a.jsxs)("div",{className:"overflow-x-auto",children:[" ",(0,a.jsxs)("table",{className:"w-full text-sm text-left",children:[" ",(0,a.jsxs)("thead",{className:"text-xs text-gray-400 uppercase bg-gray-900/50",children:[" ",(0,a.jsxs)("tr",{children:[" ",(0,a.jsx)("th",{scope:"col",className:"px-6 py-3",children:"Quiz Title"})," ",(0,a.jsx)("th",{scope:"col",className:"px-6 py-3 text-center",children:"Total Attempts"})," ",(0,a.jsx)("th",{scope:"col",className:"px-6 py-3 text-center",children:"Unique Takers"})," ",(0,a.jsx)("th",{scope:"col",className:"px-6 py-3 text-right",children:"Avg Score"})," "]})," "]})," ",(0,a.jsxs)("tbody",{children:[" ",t.map(e=>(0,a.jsxs)("tr",{className:"border-b border-gray-700/80 hover:bg-gray-800/60",children:[" ",(0,a.jsx)("th",{scope:"row",className:"px-6 py-4 font-medium text-white whitespace-nowrap",children:e.quiz_title})," ",(0,a.jsx)("td",{className:"px-6 py-4 text-center",children:e.total_attempts})," ",(0,a.jsx)("td",{className:"px-6 py-4 text-center",children:e.unique_takers})," ",(0,a.jsx)("td",{className:"px-6 py-4 text-right font-bold",children:e.avg_score.toFixed(1)})," "]},e.quiz_id))," "]})," "]})," "]})," "]})};function ec(){let e=(0,$.useRouter)(),t=(0,$.useSearchParams)(),[s,i]=(0,r.useState)(!0),[c,g]=(0,r.useState)(!1),[p,N]=(0,r.useState)(!1),[w,_]=(0,r.useState)(null),[z,q]=(0,r.useState)([]),[D,I]=(0,r.useState)(t.get("userId")||"all"),[L,P]=(0,r.useState)({from:t.get("from")?new Date(t.get("from")):(0,j.e)(new Date,30),to:t.get("to")?new Date(t.get("to")):new Date}),M=(0,r.useCallback)(async(e,t)=>{g(!0),_(null);try{var s;if(!(null==t?void 0:t.from)||!(null==t?void 0:t.to))throw Error("Date range is required.");let a=new Date(t.to);a.setHours(23,59,59,999);let r=(0,b.c)(a,t.from),i={from:(0,j.e)(t.from,r+1),to:(0,j.e)(a,r+1)},o=async(t,s)=>{let a=l.N.from("quiz_attempts").select("*, categories(name_en)").eq("status","completed").gte("created_at",t.from.toISOString()).lte("created_at",t.to.toISOString());"all"!==e&&(a=a.eq("user_id",e));let r=s?l.N.from("leaderboard").select("id, full_name, total_score").limit(10):Promise.resolve({data:[],error:null}),[i,o,n,c,d]=await Promise.all([a,l.N.from("profiles").select("id, created_at").gte("created_at",t.from.toISOString()).lte("created_at",t.to.toISOString()),s?l.N.from("question_stats").select("question_id, correct_percentage, total_attempts, questions(question_text_en)").filter("total_attempts","gte",1):Promise.resolve({data:[],error:null}),r,s?l.N.rpc("get_quiz_performance_stats",{from_date:t.from.toISOString(),to_date:t.to.toISOString()}):Promise.resolve({data:[],error:null})]);if(i.error)throw Error("Failed fetching quiz_attempts: ".concat(i.error.message));if(o.error)throw Error("Failed fetching user_signups: ".concat(o.error.message));if(s&&n.error)throw Error("Failed fetching question_stats view: ".concat(n.error.message));if(s&&c.error)throw Error("Failed fetching leaderboard data: ".concat(c.error.message));if(s&&d.error)throw Error("Failed fetching RPC: ".concat(d.error.message));return{attempts:i.data||[],signups:o.data||[],questionStats:n.data,leaderboardData:c.data,quizPerformanceData:d.data}},n=await o({from:t.from,to:a},!0),c=await o(i,!1),d=n.attempts.length,m=n.attempts.reduce((e,t)=>e+(t.score||0),0),x=d>0?m/d:0,u=n.signups.length,h=n.attempts.reduce((e,t)=>{var s;let a=(null==(s=t.categories)?void 0:s.name_en)||"General";return e[a]||(e[a]={totalScore:0,count:0}),e[a].totalScore+=t.score||0,e[a].count+=1,e},{}),g=Object.entries(h).map(e=>{let[t,s]=e;return{name:t,avgScore:parseFloat((s.totalScore/s.count||0).toFixed(1)),quizzes:s.count}}).sort((e,t)=>t.quizzes-e.quizzes),p=n.attempts.reduce((e,t)=>{let s=new Date(t.created_at).toISOString().split("T")[0];return e[s]=(e[s]||0)+1,e},{}),f=Object.entries(p).map(e=>{let[t,s]=e;return{date:t,quizzes:s}}).sort((e,t)=>new Date(e.date).getTime()-new Date(t.date).getTime()),y=n.signups.reduce((e,t)=>{let s=new Date(t.created_at).toISOString().split("T")[0];return e[s]=(e[s]||0)+1,e},{}),v=Object.entries(y).map(e=>{let[t,s]=e;return{date:t,"New Users":s}}).sort((e,t)=>new Date(e.date).getTime()-new Date(t.date).getTime()),N=c.attempts.length,w=c.attempts.reduce((e,t)=>e+(t.score||0),0),z=c.signups.length,S=(e,t)=>0===t?100*(e>0):(e-t)/t*100;_({kpis:{totalQuizzes:d,avgScore:parseFloat(x.toFixed(1)),topCategory:(null==(s=g[0])?void 0:s.name)||"N/A",totalUsers:u},kpiChanges:{totalQuizzes:S(d,N),avgScore:S(x,N>0?w/N:0),totalUsers:S(u,z)},categoryChartData:g,activityChartData:f,questionStats:{hardest:(n.questionStats||[]).sort((e,t)=>e.correct_percentage-t.correct_percentage).slice(0,5),easiest:(n.questionStats||[]).sort((e,t)=>t.correct_percentage-e.correct_percentage).slice(0,5)},leaderboardData:n.leaderboardData||[],userSignupChartData:v,quizPerformanceData:n.quizPerformanceData||[],rawAttemptsData:n.attempts})}catch(e){console.error("Failed to fetch analytics data:",e)}finally{g(!1),i(!1)}},[D,L]);return((0,r.useEffect)(()=>{(async()=>{try{let{data:{user:e}}=await l.N.auth.getUser();if(e){let{data:t}=await l.N.from("profiles").select("role").eq("id",e.id).single();if((null==t?void 0:t.role)==="admin"){N(!0);let{data:e}=await l.N.from("profiles").select("id, full_name, email").order("full_name");q(e||[]),M(D,L)}else N(!1),i(!1)}else N(!1),i(!1)}catch(e){console.error("Auth check failed:",e),N(!1),i(!1)}})()},[]),s)?(0,a.jsx)(ea,{}):p?(0,a.jsx)("main",{className:"min-h-screen w-full p-4 sm:p-8 bg-gray-900 text-white",children:(0,a.jsxs)("div",{className:"mx-auto max-w-7xl",children:[(0,a.jsxs)("div",{className:"flex flex-col md:flex-row justify-between md:items-center gap-4 mb-8",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)(o(),{href:"/admin",className:"inline-flex items-center gap-2 text-sm text-cyan-400 hover:text-cyan-300 mb-2",children:[(0,a.jsx)(Y.A,{size:16})," Back to Admin Dashboard"]}),(0,a.jsx)("h1",{className:"text-3xl md:text-4xl font-bold text-white",children:"Platform Analytics"})]}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-2 items-center",children:[(0,a.jsxs)(S,{children:[(0,a.jsx)(A,{asChild:!0,children:(0,a.jsxs)(C,{id:"date",variant:"outline",className:"w-full sm:w-[280px] justify-start text-left font-normal bg-gray-800 border border-gray-600 hover:bg-gray-700 hover:text-white",children:[(0,a.jsx)(K.A,{className:"mr-2 h-4 w-4"}),(null==L?void 0:L.from)?L.to?"".concat((0,v.GP)(L.from,"LLL dd, y")," - ").concat((0,v.GP)(L.to,"LLL dd, y")):(0,v.GP)(L.from,"LLL dd, y"):(0,a.jsx)("span",{children:"Pick a date"})]})}),(0,a.jsx)(k,{className:"w-auto p-0",align:"end",children:(0,a.jsx)(O,{initialFocus:!0,mode:"range",defaultMonth:null==L?void 0:L.from,selected:L,onSelect:P,numberOfMonths:2})})]}),(0,a.jsxs)("select",{value:D,onChange:e=>I(e.target.value),className:"w-full sm:w-auto bg-gray-800 border border-gray-600 rounded-lg py-2.5 px-3 text-white focus:outline-none focus:ring-2 focus:ring-cyan-500",children:[(0,a.jsx)("option",{value:"all",children:"All Users"}),z.map(e=>(0,a.jsx)("option",{value:e.id,children:e.full_name||e.email},e.id))]}),(0,a.jsx)(C,{onClick:()=>{let s=new URLSearchParams(t.toString());"all"!==D?s.set("userId",D):s.delete("userId"),(null==L?void 0:L.from)?s.set("from",(0,v.GP)(L.from,"yyyy-MM-dd")):s.delete("from"),(null==L?void 0:L.to)?s.set("to",(0,v.GP)(L.to,"yyyy-MM-dd")):s.delete("to"),e.replace("/admin/analytics?".concat(s.toString())),M(D,L)},disabled:c,className:"w-full sm:w-auto bg-cyan-600 hover:bg-cyan-500 disabled:opacity-50 flex items-center gap-2",children:c?(0,a.jsx)(Q.A,{className:"h-4 w-4 animate-spin"}):"Apply"}),(0,a.jsxs)(C,{onClick:()=>{if(!(null==w?void 0:w.rawAttemptsData))return;let e=encodeURI("data:text/csv;charset=utf-8,attempt_id,user_id,quiz_title,score,completed_at\n"+w.rawAttemptsData.map(e=>{var t;let s=(null==(t=e.quizzes)?void 0:t.name_en)||"N/A";return[e.id,e.user_id,'"'.concat(s.replace(/"/g,'""'),'"'),e.score,e.created_at].join(",")}).join("\n")),t=document.createElement("a");t.setAttribute("href",e),t.setAttribute("download","khojney_analytics_".concat((0,v.GP)(new Date,"yyyy-MM-dd"),".csv")),document.body.appendChild(t),t.click(),document.body.removeChild(t)},disabled:!w||0===w.rawAttemptsData.length,variant:"outline",className:"w-full sm:w-auto bg-gray-800 border-gray-600 hover:bg-gray-700 disabled:opacity-50 flex items-center gap-2",children:[(0,a.jsx)(V.A,{size:16})," Export CSV"]})]})]}),c?(0,a.jsxs)("div",{className:"space-y-8",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,a.jsx)(et,{}),(0,a.jsx)(et,{}),(0,a.jsx)(et,{}),(0,a.jsx)(et,{})]}),(0,a.jsxs)("div",{className:"grid grid-cols-12 gap-6",children:[(0,a.jsx)("div",{className:"col-span-12 lg:col-span-7",children:(0,a.jsx)(et,{})}),(0,a.jsx)("div",{className:"col-span-12 lg:col-span-5",children:(0,a.jsx)(et,{})})]})]}):w&&0!==w.kpis.totalQuizzes?(0,a.jsxs)(U.P.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},className:"space-y-8",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,a.jsx)(ee,{icon:(0,a.jsx)(Z.A,{size:24}),title:"New Users",value:w.kpis.totalUsers,trend:w.kpiChanges.totalUsers}),(0,a.jsx)(ee,{icon:(0,a.jsx)(W.A,{size:24}),title:"Total Quizzes Taken",value:w.kpis.totalQuizzes,trend:w.kpiChanges.totalQuizzes}),(0,a.jsx)(ee,{icon:(0,a.jsx)(B.A,{size:24}),title:"Average Score",value:w.kpis.avgScore,trend:w.kpiChanges.avgScore,unit:" pts"}),(0,a.jsx)(ee,{icon:(0,a.jsx)(H.A,{size:24}),title:"Top Category",value:w.kpis.topCategory,trend:0})]}),(0,a.jsxs)("div",{className:"grid grid-cols-12 gap-6",children:[(0,a.jsxs)("div",{className:"col-span-12 bg-gray-800/50 border border-gray-700/80 rounded-xl p-6 h-96",children:[(0,a.jsx)("h3",{className:"font-bold text-white mb-4",children:"Daily Activity (Quizzes vs. New Users)"}),(0,a.jsx)(n.u,{width:"100%",height:"90%",children:(0,a.jsxs)(f.b,{margin:{top:5,right:30,left:20,bottom:5},children:[(0,a.jsx)(d.d,{strokeDasharray:"3 3",strokeOpacity:.1}),(0,a.jsx)(m.W,{dataKey:"date",stroke:"#9ca3af",fontSize:12,tickLine:!1,axisLine:!1}),(0,a.jsx)(x.h,{yAxisId:"left",stroke:"#22d3ee",fontSize:12,tickLine:!1,axisLine:!1,label:{value:"Quizzes",angle:-90,position:"insideLeft",fill:"#22d3ee",style:{textAnchor:"middle"}}}),(0,a.jsx)(x.h,{yAxisId:"right",orientation:"right",stroke:"#82ca9d",fontSize:12,tickLine:!1,axisLine:!1,label:{value:"New Users",angle:-90,position:"insideRight",fill:"#82ca9d",style:{textAnchor:"middle"}}}),(0,a.jsx)(u.m,{contentStyle:{backgroundColor:"#1f2937",border:"1px solid #4b5563"}}),(0,a.jsx)(h.s,{}),(0,a.jsx)(y.N,{yAxisId:"left",type:"monotone",dataKey:"quizzes",name:"Quizzes",data:w.activityChartData,stroke:"#22d3ee",strokeWidth:2,dot:!1}),(0,a.jsx)(y.N,{yAxisId:"right",type:"monotone",dataKey:"New Users",name:"New Users",data:w.userSignupChartData,stroke:"#82ca9d",strokeWidth:2,dot:!1})]})})]}),(0,a.jsx)(el,{data:w.categoryChartData}),(0,a.jsx)("div",{className:"col-span-12 lg:col-span-5",children:(0,a.jsx)(eo,{users:w.leaderboardData})}),(0,a.jsx)("div",{className:"col-span-12",children:(0,a.jsx)(en,{data:w.quizPerformanceData})}),(0,a.jsx)("div",{className:"col-span-12 lg:col-span-6",children:(0,a.jsx)(ei,{title:"Easiest Questions",questions:w.questionStats.easiest,icon:(0,a.jsx)(F.A,{}),colorClass:"text-green-400"})}),(0,a.jsx)("div",{className:"col-span-12 lg:col-span-6",children:(0,a.jsx)(ei,{title:"Hardest Questions",questions:w.questionStats.hardest,icon:(0,a.jsx)(E.A,{}),colorClass:"text-red-400"})})]})]}):(0,a.jsx)("div",{className:"text-center h-96 flex items-center justify-center rounded-lg bg-gray-800/50",children:(0,a.jsx)(es,{message:"No quiz attempts found for this selection.",icon:(0,a.jsx)(W.A,{size:32})})})]})}):(0,a.jsx)(er,{})}}},e=>{var t=t=>e(e.s=t);e.O(0,[209,154,261,941,587,315,358],()=>t(42400)),_N_E=e.O()}]);