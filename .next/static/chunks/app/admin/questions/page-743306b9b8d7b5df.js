(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[588],{4931:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(98889).A)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},13643:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(98889).A)("book-open",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]])},36958:(e,t,s)=>{"use strict";s.d(t,{N:()=>a});let a=(0,s(36154).createBrowserClient)("https://uxpdqthqyttujyvqwaeh.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InV4cGRxdGhxeXR0dWp5dnF3YWVoIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDg5NzE3MzgsImV4cCI6MjA2NDU0NzczOH0.clopYxo2qaXYmw4poLnEoJOe6hXXotZwR3GYZL_GdMQ")},67091:(e,t,s)=>{Promise.resolve().then(s.bind(s,92923))},68262:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(98889).A)("trash-2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},92923:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>F});var a=s(54568),i=s(7620),l=s(27261),r=s.n(l),n=s(36958),o=s(49645),c=s(32545),d=s(99966),x=s(38872),u=s(75344),m=s(93425),h=s(93385),g=s(88276),p=s(64529),f=s(13643),b=s(58130),y=s(15173),j=s(35720),_=s(59388),N=s(12463),v=s(4931),w=s(68262),C=s(39690),k=s(49369);let q=e=>{let{checked:t,onChange:s}=e;return(0,a.jsx)("button",{type:"button",onClick:()=>s(!t),className:"".concat(t?"bg-cyan-600":"bg-gray-600"," relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-cyan-500 focus:ring-offset-2 focus:ring-offset-gray-900"),role:"switch","aria-checked":t,children:(0,a.jsx)("span",{"aria-hidden":"true",className:"".concat(t?"translate-x-5":"translate-x-0"," pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out")})})},S=e=>{let{allCategories:t,selectedIds:s,setSelectedIds:l}=e,[r,n]=(0,i.useState)(!1),[o,c]=(0,i.useState)(""),d=(0,i.useRef)(null),x=t.filter(e=>s.includes(e.id)),u=t.filter(e=>!s.includes(e.id)&&e.name_en.toLowerCase().includes(o.toLowerCase())),m=e=>{l(s.includes(e)?s.filter(t=>t!==e):[...s,e])};return(0,i.useEffect)(()=>{let e=e=>{d.current&&!d.current.contains(e.target)&&n(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[d]),(0,a.jsxs)("div",{className:"relative",ref:d,children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Categories"}),(0,a.jsxs)("div",{className:"w-full bg-gray-700 border border-gray-600 rounded-md p-2 flex flex-wrap gap-2 items-center min-h-[42px]",onClick:()=>n(!0),children:[x.map(e=>(0,a.jsxs)("span",{className:"bg-cyan-900/70 text-cyan-200 text-sm font-medium px-2 py-1 rounded flex items-center gap-2",children:[e.name_en,(0,a.jsx)("button",{type:"button",onClick:t=>{t.stopPropagation(),m(e.id)},className:"hover:text-white",children:(0,a.jsx)(N.A,{size:14})})]},e.id)),(0,a.jsx)("input",{type:"text",value:o,onChange:e=>{n(!0),c(e.target.value)},onFocus:()=>n(!0),placeholder:0===x.length?"Select categories...":"",className:"flex-grow bg-transparent focus:outline-none p-1 text-white"})]}),r&&(0,a.jsx)("ul",{className:"absolute z-10 mt-1 w-full max-h-60 overflow-auto rounded-md bg-gray-800 border border-gray-600 shadow-lg",children:u.length>0?u.map(e=>(0,a.jsx)("li",{onClick:()=>{m(e.id),c(""),n(!1)},className:"cursor-pointer select-none relative py-2 pl-3 pr-9 text-white hover:bg-cyan-600",children:e.name_en},e.id)):(0,a.jsx)("li",{className:"px-3 py-2 text-gray-500",children:"No categories found."})})]})};function A(e){let{question:t,allCategories:s,onSave:l,onCancel:r}=e,[o,c]=(0,i.useState)(""),[d,x]=(0,i.useState)(""),[u,m]=(0,i.useState)("medium"),[h,g]=(0,i.useState)(!1),[f,b]=(0,i.useState)([{option_text_en:"",is_correct:!0},{option_text_en:"",is_correct:!1},{option_text_en:"",is_correct:!1},{option_text_en:"",is_correct:!1}]),[y,j]=(0,i.useState)([]),[_,A]=(0,i.useState)(!1),[z,E]=(0,i.useState)(null);(0,i.useEffect)(()=>{if(t){c(t.question_text_en||""),x(t.explanation_en||""),m(t.difficulty_level||"medium"),g(t.is_published||!1);let e=t.options||[],s=Array(Math.max(0,4-e.length)).fill({option_text_en:"",is_correct:!1});b([...e,...s]),j(t.question_categories.map(e=>e.category_id))}else c(""),x(""),m("medium"),g(!1),b([{option_text_en:"",is_correct:!0},{option_text_en:"",is_correct:!1},{option_text_en:"",is_correct:!1},{option_text_en:"",is_correct:!1}]),j([])},[t]);let M=(e,t)=>{let s=[...f];s[e].option_text_en=t,b(s)},I=e=>{b(f.map((t,s)=>({...t,is_correct:s===e})))},F=e=>{let t=f.filter((t,s)=>s!==e);!t.some(e=>e.is_correct)&&t.length>0&&(t[0].is_correct=!0),b(t)},L=async e=>{if(e.preventDefault(),A(!0),E(null),1!==f.filter(e=>e.is_correct).length){E("You must select exactly one correct answer."),A(!1);return}let s=f.filter(e=>""!==e.option_text_en.trim());if(s.length<2){E("Please provide at least two answer options."),A(!1);return}try{let e={question_text_en:o,explanation_en:d,difficulty_level:u,is_published:h,language:"en"},a=null==t?void 0:t.id;if(a){let{error:t}=await n.N.from("questions").update(e).eq("id",a);if(t)throw t}else{let{data:t,error:s}=await n.N.from("questions").insert(e).select("id").single();if(s)throw s;a=t.id}if(!a)throw Error("Could not save the question.");await n.N.from("options").delete().eq("question_id",a);let i=s.map(e=>({question_id:a,option_text_en:e.option_text_en,is_correct:e.is_correct})),{error:r}=await n.N.from("options").insert(i);if(r)throw r;if(await n.N.from("question_categories").delete().eq("question_id",a),y.length>0){let e=y.map(e=>({question_id:a,category_id:e})),{error:t}=await n.N.from("question_categories").insert(e);if(t)throw t}l()}catch(e){console.error("Error saving question:",e),E(e.message||"An unexpected error occurred.")}finally{A(!1)}};return(0,a.jsxs)("div",{className:"flex flex-col h-full bg-gray-900",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center p-6 border-b border-gray-700 flex-shrink-0",children:[(0,a.jsxs)("h2",{className:"text-2xl font-bold text-white",children:[t?"Edit":"Create New"," Question"]}),(0,a.jsx)("button",{onClick:r,className:"p-2 text-gray-500 hover:text-white rounded-full hover:bg-gray-800 transition-colors",children:(0,a.jsx)(N.A,{size:24})})]}),(0,a.jsxs)("form",{onSubmit:L,className:"flex-grow p-6 space-y-6 overflow-y-auto",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"question_text_en",className:"block text-sm font-medium text-gray-300",children:"Question"}),(0,a.jsx)("textarea",{id:"question_text_en",value:o,onChange:e=>c(e.target.value),required:!0,rows:3,className:"w-full px-3 py-2 mt-1 text-white bg-gray-800 border border-gray-700 rounded-md focus:outline-none focus:ring-2 focus:ring-cyan-500"})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-300",children:"Answer Options (Select one correct answer)"}),f.map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("button",{type:"button",onClick:()=>I(t),className:"flex-shrink-0 h-6 w-6 rounded-full border-2 flex items-center justify-center transition-all ".concat(e.is_correct?"border-green-500 bg-green-500":"border-gray-500 hover:border-green-500"),children:e.is_correct&&(0,a.jsx)(v.A,{size:16,className:"text-white"})}),(0,a.jsx)("input",{type:"text",placeholder:"Option ".concat(t+1),value:e.option_text_en,onChange:e=>M(t,e.target.value),className:"w-full px-3 py-2 text-white bg-gray-800 border border-gray-700 rounded-md focus:outline-none focus:ring-2 focus:ring-cyan-500"}),(0,a.jsx)("button",{type:"button",onClick:()=>F(t),disabled:f.length<=2,className:"p-2 text-gray-500 hover:text-red-500 disabled:text-gray-700 disabled:cursor-not-allowed transition-colors",children:(0,a.jsx)(w.A,{size:18})})]},t)),(0,a.jsxs)("button",{type:"button",onClick:()=>{b([...f,{option_text_en:"",is_correct:!1}])},className:"text-sm text-cyan-400 hover:text-cyan-300 inline-flex items-center gap-1",children:[(0,a.jsx)(p.A,{size:16})," Add Option"]})]}),(0,a.jsx)(S,{allCategories:s,selectedIds:y,setSelectedIds:j}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"difficulty",className:"block text-sm font-medium text-gray-300",children:"Difficulty"}),(0,a.jsxs)("select",{id:"difficulty",value:u,onChange:e=>m(e.target.value),className:"w-full px-3 py-2 mt-1 text-white bg-gray-800 border border-gray-700 rounded-md focus:outline-none focus:ring-2 focus:ring-cyan-500",children:[(0,a.jsx)("option",{value:"easy",children:"Easy"}),(0,a.jsx)("option",{value:"medium",children:"Medium"}),(0,a.jsx)("option",{value:"hard",children:"Hard"})]})]}),(0,a.jsxs)("div",{className:"flex flex-col justify-start pt-2",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-300",children:"Status"}),(0,a.jsxs)("div",{className:"flex items-center gap-3 mt-2",children:[(0,a.jsx)(q,{checked:h,onChange:g}),(0,a.jsx)("span",{className:"text-sm text-gray-200",children:h?"Published":"Draft"})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{htmlFor:"explanation_en",className:"block text-sm font-medium text-gray-300",children:["Explanation ",(0,a.jsx)("span",{className:"text-gray-500",children:"(Optional)"})]}),(0,a.jsx)("textarea",{id:"explanation_en",value:d,onChange:e=>x(e.target.value),rows:2,className:"w-full px-3 py-2 mt-1 text-white bg-gray-800 border border-gray-700 rounded-md focus:outline-none focus:ring-2 focus:ring-cyan-500"})]})]}),(0,a.jsxs)("div",{className:"flex-shrink-0 p-6 border-t border-gray-700 bg-gray-900 flex justify-between items-center",children:[z&&(0,a.jsxs)("div",{className:"flex items-center gap-2 text-red-400 text-sm",children:[(0,a.jsx)(C.A,{size:18}),(0,a.jsx)("span",{children:z})]}),(0,a.jsx)("div",{className:"flex-grow"}),(0,a.jsxs)("div",{className:"flex gap-4",children:[(0,a.jsx)("button",{type:"button",onClick:r,className:"px-5 py-2 font-bold text-gray-300 bg-gray-700/50 rounded-md hover:bg-gray-700 transition-colors",children:"Cancel"}),(0,a.jsxs)("button",{type:"button",onClick:()=>{var e;return null==(e=document.querySelector("form"))?void 0:e.requestSubmit()},className:"px-5 py-2 font-bold text-white bg-cyan-600 rounded-md hover:bg-cyan-500 disabled:bg-gray-500 flex items-center gap-2",disabled:_,children:[_&&(0,a.jsx)(k.A,{size:16,className:"animate-spin"}),_?"Saving...":"Save Question"]})]})]})]})}let z=()=>(0,a.jsx)("main",{className:"flex min-h-screen w-full items-center justify-center bg-gray-900",children:(0,a.jsx)("p",{className:"text-lg text-gray-400",children:"Loading Admin Section..."})}),E=()=>(0,a.jsxs)("main",{className:"flex min-h-screen flex-col items-center justify-center p-8 text-center bg-gray-900",children:[(0,a.jsx)(d.A,{className:"w-16 h-16 text-red-500 mb-4"}),(0,a.jsx)("h1",{className:"text-2xl font-bold text-red-400",children:"Access Denied"}),(0,a.jsx)("p",{className:"mt-2 text-gray-400",children:"You do not have the required permissions to view this page."}),(0,a.jsx)(r(),{href:"/",className:"text-cyan-400 hover:text-cyan-300 mt-6",children:"Go to Homepage"})]}),M=e=>{let{icon:t,title:s,value:i,colorClass:l}=e;return(0,a.jsx)("div",{className:"bg-gray-800/50 border border-gray-700/80 rounded-xl p-5",children:(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("div",{className:"flex-shrink-0 w-10 h-10 rounded-lg flex items-center justify-center ".concat(l),children:t}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-400",children:s}),(0,a.jsx)("p",{className:"text-2xl font-bold text-white",children:i})]})]})})},I=e=>{let{allCategories:t,onUploadComplete:s}=e,[l,r]=(0,i.useState)(null),[o,c]=(0,i.useState)(!1),[g,p]=(0,i.useState)(null),f=e=>{let t=e.split("\n").filter(e=>""!==e.trim());if(t.length<2)return[];let s=t[0].split(",").map(e=>e.trim()),a=[];for(let e=1;e<t.length;e++){let l=t[e].split(",").map(e=>e.trim().replace(/"/g,"")),r={};s.forEach((e,t)=>r[e]=l[t]);let n={question_text_en:r.question_text_en,difficulty_level:r.difficulty_level,points:parseInt(r.points,10),explanation_en:r.explanation_en,is_published:!r.is_published||"true"===r.is_published.toLowerCase(),language:r.language||"en",options:[],categories:r.categories?r.categories.split("|").map(e=>e.trim()):[]};for(let e=1;e<=4;e++)if(r["option".concat(e,"_text")]){var i;n.options.push({option_text_en:r["option".concat(e,"_text")],is_correct:(null==(i=r["option".concat(e,"_is_correct")])?void 0:i.toLowerCase())==="true"})}a.push(n)}return a},b=async()=>{if(!l)return;c(!0),p(null);let e=new FileReader;e.onload=async e=>{try{var a,i,l;let r=null==(a=e.target)?void 0:a.result;if("string"!=typeof r)throw Error("Could not read file content.");let o=f(r),c=new Map(t.map(e=>[e.name_en.toLowerCase(),e.id])),d=0;for(let e of o){let{data:t,error:s}=await n.N.from("questions").insert({question_text_en:e.question_text_en,difficulty_level:e.difficulty_level,points:e.points,is_published:null==(i=e.is_published)||i,explanation_en:e.explanation_en,language:null!=(l=e.language)?l:"en"}).select("id").single();if(s)throw Error('Adding question "'.concat(e.question_text_en.substring(0,20),'...": ').concat(s.message));let a=t.id,r=e.options.map(e=>({question_id:a,...e}));await n.N.from("options").insert(r);let o=e.categories.map(e=>c.get(e.toLowerCase())).filter(e=>!!e);if(o.length>0){let e=o.map(e=>({question_id:a,category_id:e}));await n.N.from("question_categories").insert(e)}d++}p({type:"success",message:"Successfully added ".concat(d," questions!")}),s()}catch(e){p({type:"error",message:e.message||"An unknown error occurred."})}finally{c(!1),r(null)}},e.readAsText(l)};return(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 my-12",children:[(0,a.jsxs)("div",{className:"bg-slate-800/50 p-6 rounded-xl border border-slate-700",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,a.jsx)(x.A,{className:"h-6 w-6 text-cyan-400"}),(0,a.jsx)("h3",{className:"text-xl font-bold text-white",children:"Bulk Import Questions"})]}),(0,a.jsx)("p",{className:"text-sm text-slate-400 mb-4",children:"Upload a CSV file with multiple questions."}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("label",{htmlFor:"file-upload",className:"cursor-pointer bg-slate-700 text-white font-semibold py-2 px-4 rounded-lg hover:bg-slate-600 transition-colors",children:l?"File Selected":"Choose File"}),(0,a.jsx)("input",{id:"file-upload",type:"file",className:"hidden",accept:".csv",onChange:e=>{e.target.files&&(r(e.target.files[0]),p(null))}}),(0,a.jsx)("span",{className:"text-slate-500 text-sm truncate",children:(null==l?void 0:l.name)||"No file chosen"})]}),(0,a.jsx)("button",{onClick:b,disabled:!l||o,className:"w-full mt-4 py-2.5 px-4 rounded-lg bg-cyan-600 text-white font-bold hover:bg-cyan-500 disabled:bg-slate-600 disabled:cursor-not-allowed transition-colors",children:o?"Uploading...":"Upload Questions"}),g&&(0,a.jsxs)("div",{className:"mt-4 p-3 rounded-md text-sm flex items-center gap-2 ".concat("success"===g.type?"bg-green-500/20 text-green-300":"bg-red-500/20 text-red-300"),children:["success"===g.type?(0,a.jsx)(u.A,{size:16}):(0,a.jsx)(d.A,{size:16}),g.message]})]}),(0,a.jsxs)("div",{className:"bg-slate-800/50 p-6 rounded-xl border border-slate-700",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(m.A,{className:"h-6 w-6 text-slate-400"}),(0,a.jsx)("h3",{className:"text-xl font-bold text-white",children:"CSV Data Format"})]}),(0,a.jsxs)("button",{onClick:()=>{let e=encodeURI('data:text/csv;charset=utf-8,question_text_en,difficulty_level,points,explanation_en,is_published,language,categories,option1_text,option1_is_correct,option2_text,option2_is_correct,option3_text,option3_is_correct,option4_text,option4_is_correct\n"What is the capital of France?","easy",1,"Paris is the capital city.","true","en","General Knowledge|Geography","London","false","Paris","true","Berlin","false","Madrid","false"'),t=document.createElement("a");t.setAttribute("href",e),t.setAttribute("download","sample_questions.csv"),document.body.appendChild(t),t.click(),document.body.removeChild(t)},className:"flex items-center gap-2 text-sm bg-slate-700 text-white font-semibold py-2 px-3 rounded-lg hover:bg-slate-600 transition-colors",children:[(0,a.jsx)(h.A,{size:16})," Download Sample"]})]}),(0,a.jsx)("p",{className:"text-sm text-slate-400 mb-4",children:'File must have these exact headers. Use "|" to separate multiple categories.'}),(0,a.jsx)("pre",{className:"bg-black/50 p-4 rounded-md text-xs text-slate-300 overflow-x-auto",children:(0,a.jsx)("code",{children:"question_text_en, difficulty_level, points, language, categories, option1_text, ..."})})]})]})};function F(){let[e,t]=(0,i.useState)(!0),[s,l]=(0,i.useState)(!1),[d,x]=(0,i.useState)([]),[m,h]=(0,i.useState)([]),[N,v]=(0,i.useState)(!1),[w,C]=(0,i.useState)(null),[k,q]=(0,i.useState)(""),[S,F]=(0,i.useState)("all"),[L,P]=(0,i.useState)({key:"created_at",direction:"desc"}),[D,O]=(0,i.useState)(1),Q=(0,i.useCallback)(async()=>{try{let{data:e,error:t}=await n.N.from("questions").select("id, question_text_en, is_published, created_at, question_categories ( categories ( name_en ) )").order("created_at",{ascending:!1}),{data:s,error:a}=await n.N.from("categories").select("id, name_en").order("name_en",{ascending:!0});if(t)throw t;if(a)throw a;x(e||[]),h(s||[])}catch(e){console.error("Error fetching data:",e)}},[]);(0,i.useEffect)(()=>{(async()=>{t(!0);try{let{data:{user:e}}=await n.N.auth.getUser();if(e){let{data:t}=await n.N.from("profiles").select("role").eq("id",e.id).single();(null==t?void 0:t.role)==="admin"&&(l(!0),await Q())}}catch(e){console.error("Auth/Fetch Error:",e),l(!1)}finally{t(!1)}})()},[Q]);let U=async e=>{try{let{data:t,error:s}=await n.N.from("questions").select("*, options (*), question_categories (category_id)").eq("id",e.id).single();if(s)throw s;C(t),v(!0)}catch(e){console.error("Error fetching full question details for editing:",e),alert("Could not load question details for editing.")}},V=(0,i.useMemo)(()=>{let e=d.filter(e=>e.is_published).length;return{total:d.length,published:e,drafts:d.length-e}},[d]),G=(0,i.useMemo)(()=>[...d].filter(e=>e.question_text_en.toLowerCase().includes(k.toLowerCase())).filter(e=>"all"===S||("published"===S?e.is_published:!e.is_published)).sort((e,t)=>{let s=e[L.key],a=t[L.key];return s<a?"asc"===L.direction?-1:1:s>a?"asc"===L.direction?1:-1:0}),[d,k,S,L]),J=(0,i.useMemo)(()=>{let e=(D-1)*10;return G.slice(e,e+10)},[G,D]),Y=Math.ceil(G.length/10),R=e=>{let t=L.key===e&&"asc"===L.direction?"desc":"asc";P({key:e,direction:t})};return e?(0,a.jsx)(z,{}):s?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(o.N,{children:N&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(c.P.div,{className:"fixed inset-0 bg-black/60 z-40",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0}}),(0,a.jsx)(c.P.div,{initial:{x:"100%"},animate:{x:0},exit:{x:"100%"},transition:{type:"spring",stiffness:300,damping:30},className:"fixed top-0 right-0 h-full w-full max-w-2xl bg-gray-900 shadow-2xl z-50 border-l border-gray-800",children:(0,a.jsx)(A,{question:w,allCategories:m,onSave:()=>{v(!1),C(null),Q()},onCancel:()=>{v(!1),C(null)}})},w?w.id:"create-new-question")]})}),(0,a.jsx)("main",{className:"w-full p-8 sm:p-12 bg-gray-900 text-white min-h-screen",children:(0,a.jsxs)("div",{className:"mx-auto max-w-7xl",children:[(0,a.jsx)("div",{className:"mb-10",children:(0,a.jsxs)(r(),{href:"/admin",className:"inline-flex items-center gap-2 text-sm text-cyan-400 hover:text-cyan-300",children:[(0,a.jsx)(g.A,{size:16})," Back to Admin Dashboard"]})}),(0,a.jsxs)("div",{className:"flex flex-col md:flex-row justify-between md:items-center gap-4 mb-8",children:[(0,a.jsx)("h1",{className:"text-4xl font-bold",children:"Question Management"}),(0,a.jsxs)("button",{onClick:()=>{C(null),v(!0)},className:"inline-flex items-center justify-center gap-2 bg-cyan-600 hover:bg-cyan-500 text-white font-bold py-2 px-5 rounded-lg transition-colors",children:[(0,a.jsx)(p.A,{size:18})," New Question"]})]}),(0,a.jsxs)(c.P.div,{initial:{opacity:0},animate:{opacity:1},className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[(0,a.jsx)(M,{icon:(0,a.jsx)(f.A,{size:22}),title:"Total Questions",value:V.total,colorClass:"bg-blue-500/20 text-blue-300"}),(0,a.jsx)(M,{icon:(0,a.jsx)(u.A,{size:22}),title:"Published",value:V.published,colorClass:"bg-green-500/20 text-green-300"}),(0,a.jsx)(M,{icon:(0,a.jsx)(b.A,{size:22}),title:"Drafts",value:V.drafts,colorClass:"bg-yellow-500/20 text-yellow-300"})]}),(0,a.jsx)(I,{allCategories:m,onUploadComplete:Q}),(0,a.jsxs)("div",{className:"flex flex-col md:flex-row gap-4 mb-4",children:[(0,a.jsxs)("div",{className:"relative flex-grow",children:[(0,a.jsx)(y.A,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",size:18}),(0,a.jsx)("input",{type:"text",placeholder:"Search questions...",value:k,onChange:e=>q(e.target.value),className:"w-full bg-gray-800 border border-gray-700 rounded-lg py-2 pl-10 pr-4 text-white focus:outline-none focus:ring-1 focus:ring-cyan-500"})]}),(0,a.jsxs)("select",{value:S,onChange:e=>F(e.target.value),className:"bg-gray-800 border border-gray-700 rounded-lg py-2 px-3 text-white focus:outline-none focus:ring-1 focus:ring-cyan-500",children:[(0,a.jsx)("option",{value:"all",children:"All Statuses"}),(0,a.jsx)("option",{value:"published",children:"Published"}),(0,a.jsx)("option",{value:"draft",children:"Draft"})]})]}),(0,a.jsx)("div",{className:"bg-gray-800/60 border border-gray-700/60 rounded-xl shadow-lg overflow-hidden",children:(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full text-left",children:[(0,a.jsx)("thead",{className:"bg-gray-900/50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"p-4 cursor-pointer hover:bg-gray-700/50 transition-colors",onClick:()=>R("question_text_en"),children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:["Question ",(0,a.jsx)(j.A,{size:14})]})}),(0,a.jsx)("th",{className:"p-4",children:"Categories"}),(0,a.jsx)("th",{className:"p-4 cursor-pointer hover:bg-gray-700/50 transition-colors",onClick:()=>R("is_published"),children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:["Status ",(0,a.jsx)(j.A,{size:14})]})}),(0,a.jsx)("th",{className:"p-4 text-right",children:"Actions"})]})}),(0,a.jsx)("tbody",{children:J.length>0?J.map(e=>(0,a.jsxs)("tr",{className:"border-t border-gray-700/50 hover:bg-gray-700/50",children:[(0,a.jsx)("td",{className:"p-4 font-medium max-w-md truncate",title:e.question_text_en,children:e.question_text_en}),(0,a.jsx)("td",{className:"p-4 text-gray-400 text-sm max-w-xs truncate",children:e.question_categories.map(e=>{var t;return null==(t=e.categories)?void 0:t.name_en}).join(", ")}),(0,a.jsx)("td",{className:"p-4",children:(0,a.jsx)("span",{className:"px-2 py-1 text-xs font-semibold rounded-full ".concat(e.is_published?"bg-green-500/20 text-green-300":"bg-yellow-500/20 text-yellow-300"),children:e.is_published?"Published":"Draft"})}),(0,a.jsx)("td",{className:"p-4 text-right",children:(0,a.jsxs)("button",{onClick:()=>U(e),className:"text-cyan-400 hover:text-cyan-300 inline-flex items-center gap-1",children:[(0,a.jsx)(_.A,{size:14})," Edit"]})})]},e.id)):(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:4,className:"text-center text-gray-500 py-16",children:"No questions found matching your criteria."})})})]})})}),Y>1&&(0,a.jsxs)("div",{className:"flex items-center justify-between mt-6 text-sm",children:[(0,a.jsx)("button",{onClick:()=>O(e=>Math.max(1,e-1)),disabled:1===D,className:"flex items-center gap-2 px-4 py-2 bg-gray-700/80 rounded-md disabled:opacity-50 hover:bg-gray-700/100 transition-colors",children:"Previous"}),(0,a.jsxs)("span",{className:"font-semibold text-gray-300",children:["Page ",D," of ",Y]}),(0,a.jsx)("button",{onClick:()=>O(e=>Math.min(Y,e+1)),disabled:D===Y,className:"flex items-center gap-2 px-4 py-2 bg-gray-700/80 rounded-md disabled:opacity-50 hover:bg-gray-700/100 transition-colors",children:"Next"})]})]})})]}):(0,a.jsx)(E,{})}}},e=>{var t=t=>e(e.s=t);e.O(0,[209,154,261,647,587,315,358],()=>t(67091)),_N_E=e.O()}]);