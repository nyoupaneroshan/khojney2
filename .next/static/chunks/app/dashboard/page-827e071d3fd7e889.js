(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[105],{15870:(e,t,s)=>{"use strict";s.d(t,{A:()=>l});let l=(0,s(98889).A)("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])},19594:(e,t,s)=>{"use strict";s.d(t,{A:()=>l});let l=(0,s(98889).A)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},27911:(e,t,s)=>{"use strict";s.d(t,{A:()=>l});let l=(0,s(98889).A)("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},40368:(e,t,s)=>{"use strict";s.d(t,{A:()=>l});let l=(0,s(98889).A)("chart-column",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]])},44399:(e,t,s)=>{"use strict";s.d(t,{default:()=>z});var l=s(54568),a=s(7620),r=s(32545),c=s(88276),n=s(19594),i=s(75344),d=s(99966),o=s(40368),x=s(71467),m=s(98889);let h=(0,m.A)("award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);var u=s(15870),y=s(27911);let g=(0,m.A)("flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]),p=(0,m.A)("hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);var f=s(83052);let j=e=>{let{href:t,children:s,...a}=e;return(0,l.jsx)("a",{href:t,...a,children:s})},v={from:e=>({update:e=>({eq:(e,t)=>Promise.resolve({error:null})})})},b=e=>{let{name:t}=e;return(0,l.jsxs)("div",{className:"flex justify-between items-center mb-10",children:[(0,l.jsxs)("div",{children:[(0,l.jsxs)("h1",{className:"text-3xl md:text-4xl font-bold text-white",children:["Welcome back, ",t,"!"]}),(0,l.jsx)("p",{className:"text-lg text-gray-400 mt-1",children:"Let's review your progress and conquer new challenges."})]}),(0,l.jsxs)(j,{href:"/categories",className:"hidden sm:inline-flex items-center gap-2 text-gray-300 hover:text-white transition-colors",children:[(0,l.jsx)(c.A,{size:18})," Back to Categories"]})]})},N=e=>{let{icon:t,title:s,value:a,colorClass:r}=e;return(0,l.jsxs)("div",{className:"bg-gray-800/50 border border-gray-700/80 rounded-xl p-6 flex items-center gap-5 shadow-lg",children:[(0,l.jsx)("div",{className:"flex-shrink-0 w-12 h-12 rounded-lg flex items-center justify-center ".concat(r),children:t}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-2xl font-bold text-white",children:a}),(0,l.jsx)("p",{className:"text-sm text-gray-400",children:s})]})]})},w=e=>{let{user:t,initialProfile:s}=e,[r,c]=(0,a.useState)((null==s?void 0:s.full_name)||""),[o,x]=(0,a.useState)(!1),[m,h]=(0,a.useState)(null),u=async e=>{e.preventDefault(),x(!0),h(null);let{error:s}=await v.from("profiles").update({full_name:r}).eq("id",t.id);s?h({text:"Error updating profile.",type:"error"}):h({text:"Profile updated!",type:"success"}),x(!1)};return(0,l.jsxs)("div",{className:"bg-gray-800/50 border border-gray-700/80 rounded-xl p-6 h-full flex flex-col",children:[(0,l.jsxs)("div",{className:"flex items-center gap-4 mb-6",children:[(0,l.jsx)(n.A,{className:"w-8 h-8 text-cyan-400"}),(0,l.jsx)("h2",{className:"text-2xl font-bold text-white",children:"Your Profile"})]}),(0,l.jsxs)("div",{className:"space-y-2 mb-6",children:[(0,l.jsx)("p",{className:"font-semibold text-lg text-white",children:(null==s?void 0:s.full_name)||"No Name Set"}),(0,l.jsx)("p",{className:"text-sm text-gray-400",children:t.email})]}),(0,l.jsxs)("form",{onSubmit:u,className:"space-y-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{htmlFor:"fullName",className:"block text-sm font-medium text-gray-400 mb-1",children:"Update Name"}),(0,l.jsx)("input",{id:"fullName",type:"text",value:r,onChange:e=>c(e.target.value),className:"w-full px-3 py-2 text-white bg-gray-900 border border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-cyan-500"})]}),(0,l.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,l.jsx)("button",{type:"submit",className:"px-5 py-2 font-bold text-white bg-cyan-600 rounded-md hover:bg-cyan-500 disabled:bg-gray-500 transition-colors",disabled:o,children:o?"Saving...":"Save"}),m&&(0,l.jsxs)("div",{className:"flex items-center gap-2 text-sm ".concat("success"===m.type?"text-green-400":"text-red-400"),children:["success"===m.type?(0,l.jsx)(i.A,{size:16}):(0,l.jsx)(d.A,{size:16})," ",m.text]})]})]})]})},k=e=>{let{performanceData:t}=e;return(0,l.jsxs)("div",{className:"bg-gray-800/50 border border-gray-700/80 rounded-xl p-6 h-full",children:[(0,l.jsxs)("div",{className:"flex items-center gap-4 mb-6",children:[(0,l.jsx)(o.A,{className:"w-8 h-8 text-cyan-400"}),(0,l.jsx)("h2",{className:"text-2xl font-bold text-white",children:"Category Performance"})]}),(0,l.jsx)("div",{className:"space-y-4",children:t&&0!==t.length?t.map(e=>{let t=(e.total_questions_answered||0)>0?(e.correct_answers||0)/e.total_questions_answered*100:0;return(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"flex justify-between items-center mb-1 text-gray-300",children:[(0,l.jsx)("span",{className:"font-semibold",children:e.category_name}),(0,l.jsxs)("span",{className:"text-sm",children:[e.correct_answers," / ",e.total_questions_answered]})]}),(0,l.jsx)("div",{className:"w-full bg-gray-700 rounded-full h-3",children:(0,l.jsx)("div",{className:"bg-gradient-to-r from-cyan-500 to-blue-600 h-3 rounded-full",style:{width:"".concat(t,"%")}})})]},e.category_name)}):(0,l.jsx)("p",{className:"text-gray-400 text-center py-10",children:"No performance data yet."})})]})},A=e=>{let{recentAchievements:t}=e;return(0,l.jsxs)("div",{className:"bg-gray-800/50 border border-gray-700/80 rounded-xl p-6 h-full",children:[(0,l.jsxs)("div",{className:"flex items-center gap-4 mb-6",children:[(0,l.jsx)(x.A,{className:"w-8 h-8 text-yellow-400"}),(0,l.jsx)("h2",{className:"text-2xl font-bold text-white",children:"Recent Achievements"})]}),(0,l.jsx)("div",{className:"space-y-4",children:t&&0!==t.length?t.map(e=>{let{achievements:t,earned_at:s}=e;return t&&(0,l.jsxs)("div",{className:"flex items-center gap-4",children:[(0,l.jsx)("div",{className:"w-10 h-10 bg-yellow-900/50 text-yellow-400 rounded-full flex items-center justify-center flex-shrink-0",children:(0,l.jsx)(h,{size:20})}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"font-bold text-white",children:t.name}),(0,l.jsxs)("p",{className:"text-sm text-gray-400",children:["Earned on ",new Date(s).toLocaleDateString()]})]})]},s)}):(0,l.jsx)("p",{className:"text-gray-400 text-center py-10",children:"Your first achievement is just one quiz away!"})})]})},_=e=>{let{initialAttempts:t}=e,[s,r]=(0,a.useState)({category:"all",status:"all"}),[c,n]=(0,a.useState)(1),i=(0,a.useMemo)(()=>["all",...Array.from(new Set(t.map(e=>{var t;return null==(t=e.categories)?void 0:t.name_en}).filter(Boolean)))],[t]),d=(0,a.useMemo)(()=>t.filter(e=>{var t;return("all"===s.category||(null==(t=e.categories)?void 0:t.name_en)===s.category)&&("all"===s.status||e.status===s.status)}),[t,s]),o=(0,a.useMemo)(()=>d.slice((c-1)*5,5*c),[d,c]),x=Math.ceil(d.length/5),m=(0,a.useCallback)(e=>{r(t=>({...t,[e.target.name]:e.target.value})),n(1)},[]);return(0,l.jsxs)("div",{className:"bg-gray-800/50 border border-gray-700/80 rounded-xl p-6 flex flex-col h-full",children:[(0,l.jsxs)("div",{className:"flex items-center gap-4 mb-6",children:[(0,l.jsx)(h,{className:"w-8 h-8 text-cyan-400"}),(0,l.jsx)("h2",{className:"text-2xl font-bold text-white",children:"Quiz History"})]}),t.length>0?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[(0,l.jsxs)("div",{className:"flex-grow",children:[(0,l.jsx)("label",{htmlFor:"category",className:"sr-only",children:"Category"}),(0,l.jsx)("select",{id:"category",name:"category",value:s.category,onChange:m,className:"w-full px-3 py-2 text-white bg-gray-900 border border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-cyan-500",children:i.map(e=>(0,l.jsx)("option",{value:e,children:"all"===e?"All Categories":e},e))})]}),(0,l.jsxs)("div",{className:"flex-grow",children:[(0,l.jsx)("label",{htmlFor:"status",className:"sr-only",children:"Status"}),(0,l.jsxs)("select",{id:"status",name:"status",value:s.status,onChange:m,className:"w-full px-3 py-2 text-white bg-gray-900 border border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-cyan-500",children:[(0,l.jsx)("option",{value:"all",children:"All Statuses"}),(0,l.jsx)("option",{value:"completed",children:"Completed"}),(0,l.jsx)("option",{value:"started",children:"In Progress"})]})]})]}),(0,l.jsx)("div",{className:"space-y-4 flex-grow min-h-[300px]",children:o.length>0?o.map(e=>{var t,s;return(0,l.jsxs)(j,{href:"/quiz/results/".concat(e.id),className:"block p-4 rounded-lg bg-gray-900/70 border border-gray-700 hover:border-cyan-500/50 transition-all flex items-center gap-4 group",children:[(0,l.jsxs)("div",{className:"flex-grow",children:[(0,l.jsx)("p",{className:"font-bold text-white group-hover:text-cyan-400",children:(null==(t=e.categories)?void 0:t.name_en)||"General Quiz"}),(0,l.jsx)("p",{className:"text-sm text-gray-400",children:e.completed_at?new Date(e.completed_at).toLocaleDateString():"In Progress"})]}),(0,l.jsx)("div",{className:"text-right",children:"completed"===e.status?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("p",{className:"font-bold text-xl text-cyan-400",children:null!=(s=e.score)?s:"-"}),(0,l.jsx)("p",{className:"text-xs text-gray-500",children:"Score"})]}):(0,l.jsx)("span",{className:"px-3 py-1 text-xs font-semibold rounded-full bg-yellow-500/20 text-yellow-300",children:"In Progress"})})]},e.id)}):(0,l.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,l.jsx)("p",{className:"text-gray-400",children:"No attempts match filters."})})}),x>1&&(0,l.jsxs)("div",{className:"flex items-center justify-between mt-6 text-sm",children:[(0,l.jsxs)("button",{onClick:()=>n(e=>Math.max(1,e-1)),disabled:1===c,className:"flex items-center gap-2 px-4 py-2 bg-gray-700/80 rounded-md disabled:opacity-50",children:[(0,l.jsx)(u.A,{size:16})," Prev"]}),(0,l.jsxs)("span",{className:"font-semibold text-gray-300",children:["Page ",c," of ",x]}),(0,l.jsxs)("button",{onClick:()=>n(e=>Math.min(x,e+1)),disabled:c===x,className:"flex items-center gap-2 px-4 py-2 bg-gray-700/80 rounded-md disabled:opacity-50",children:["Next ",(0,l.jsx)(y.A,{size:16})]})]})]}):(0,l.jsxs)("div",{className:"flex flex-col items-center justify-center text-center py-20 flex-grow",children:[(0,l.jsx)("p",{className:"text-gray-400",children:"No quiz history yet."}),(0,l.jsx)(j,{href:"/categories",className:"mt-4 inline-block bg-cyan-600 hover:bg-cyan-500 text-white font-bold py-2 px-4 rounded-lg",children:"Start a Quiz"})]})]})};function z(e){var t;let{user:s,initialProfile:a,initialAttempts:c,categoryPerformance:n,recentAchievements:i,overallStats:d}=e;return s&&a?(0,l.jsx)("main",{className:"min-h-screen w-full p-6 sm:p-10 bg-gray-900 text-white",children:(0,l.jsxs)("div",{className:"mx-auto max-w-7xl",children:[(0,l.jsx)(b,{name:(null==a?void 0:a.full_name)||(null==(t=s.user_metadata)?void 0:t.full_name)||"learner"}),(0,l.jsxs)(r.P.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.1},className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-10",children:[(0,l.jsx)(N,{icon:(0,l.jsx)(g,{size:24}),title:"Day Streak",value:(null==a?void 0:a.current_streak)||0,colorClass:"bg-orange-500/20 text-orange-300"}),(0,l.jsx)(N,{icon:(0,l.jsx)(p,{size:24}),title:"Quizzes Taken",value:(null==d?void 0:d.total_quizzes)||0,colorClass:"bg-blue-500/20 text-blue-300"}),(0,l.jsx)(N,{icon:(0,l.jsx)(f.A,{size:24}),title:"Overall Accuracy",value:"".concat((null==d?void 0:d.accuracy)||0,"%"),colorClass:"bg-green-500/20 text-green-300"}),(0,l.jsx)(N,{icon:(0,l.jsx)(x.A,{size:24}),title:"Achievements Earned",value:(null==i?void 0:i.length)||0,colorClass:"bg-yellow-500/20 text-yellow-300"})]}),(0,l.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,l.jsxs)(r.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"lg:col-span-1 space-y-8",children:[(0,l.jsx)(w,{user:s,initialProfile:a}),(0,l.jsx)(A,{recentAchievements:i})]}),(0,l.jsxs)(r.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"lg:col-span-2 space-y-8",children:[(0,l.jsx)(k,{performanceData:n}),(0,l.jsx)(_,{initialAttempts:c})]})]})]})}):(0,l.jsx)("main",{className:"min-h-screen w-full flex items-center justify-center p-6 sm:p-10 bg-gray-900 text-white",children:(0,l.jsx)("p",{children:"Loading user data..."})})}},50980:(e,t,s)=>{Promise.resolve().then(s.bind(s,44399))},71467:(e,t,s)=>{"use strict";s.d(t,{A:()=>l});let l=(0,s(98889).A)("trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]])},75344:(e,t,s)=>{"use strict";s.d(t,{A:()=>l});let l=(0,s(98889).A)("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]])},83052:(e,t,s)=>{"use strict";s.d(t,{A:()=>l});let l=(0,s(98889).A)("target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]])},88276:(e,t,s)=>{"use strict";s.d(t,{A:()=>l});let l=(0,s(98889).A)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},99966:(e,t,s)=>{"use strict";s.d(t,{A:()=>l});let l=(0,s(98889).A)("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])}},e=>{var t=t=>e(e.s=t);e.O(0,[209,587,315,358],()=>t(50980)),_N_E=e.O()}]);